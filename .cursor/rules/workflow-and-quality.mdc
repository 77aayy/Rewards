---
description: منهجية التنفيذ والمراجعة — دقة، عدم تخمين، تحقق قبل الإنهاء
alwaysApply: true
---

# منهجية التنفيذ والمراجعة

## قبل التعديل
- **اقرأ قبل ما تكود:** اقرأ الدالة كاملة + ~30 سطر حولها قبل أي تغيير.
- **تحقق من النطاق:** أي متغير تستخدمه متاح في الـ scope (تجنب ReferenceError).
- **لا تخمين:** لو السياق ناقص، قل "INSUFFICIENT CONTEXT — حدّد X" بدل التخمين.

## أثناء التعديل
- **UPDATE > CREATE:** عدّل الكود الموجود لتحقيق المطلوب. لا تبني من الصفر إلا لو طُلِب صراحة.
- **RBAC / أدوار الواجهة:** إذا كنت تخفي عناصر حسب الدور (مشرف، HR، حسابات، مدير):
  - راجع دوال الإخفاء في الـ JS (مثلاً `hideElementsForSupervisor`, `hideElementsForHR`, …).
  - أضف قواعد CSS احتياطية لنفس العناصر تحت `body.role-*` حتى لو تأخر تنفيذ الـ JS.
  - الـ CSS يجب أن يطابق منطق الـ JS (نفس الأزرار/الحقول المخفاة لكل دور).

## بعد التعديل
- **لا تقل "مافيش أخطاء" بدون تحقق:** شغّل `read_lints` على الملفات اللي عدّلتها قبل ما تعتبر المهمة منتهية.
- **التنفيذ منتهي لما:** الـ linter نظيف، الـ scope/context متحققة، والمستخدم أكّد (في تغييرات منطق حساسة).

## أمان
- لا مفاتيح أو توكنات ثابتة في الكود. تحذير فوري لو ظهر سر في الملفات.

## واجهة (UI)
- لون العلامة: تركواز `#14b8a6` / `text-primary-500`.
- نمط: glassmorphism (`backdrop-blur-xl`, `border-white/20`)، تصميم mobile-first.
