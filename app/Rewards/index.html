<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#14b8a6">
    <meta name="description" content="ูุธุงู ุฅุฏุงุฑุฉ ููุงูุขุช ููุฏู ุฅููุช">
    <title>ุฅููุช | ูุดู ุงูููุงูุขุช ุงูููุงุฆู</title>
    <!-- ุชููู: ุชุณุฑูุน ุงูุงุชุตุงู ุจู Firebase ุนูุฏ ูุชุญ ุฑุงุจุท ุงูุฅุฏุงุฑู -->
    <link rel="preconnect" href="https://firebasestorage.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Libraries -->
    <!-- Tailwind CDN: ููุชุทููุฑ/ุงูููุงุฐุฌ ููุท. ููุฅูุชุงุฌ: ุงุณุชุฎุฏู PostCSS ุฃู Tailwind CLI (ุฑุงุฌุน https://tailwindcss.com/docs/installation) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- SheetJS ูู ุงููุตุฏุฑ ุงูุฑุณูู (cdn.sheetjs.com) โ ุฅุตุฏุงุฑ 0.20.3. ุชุญูู ุงูุญุฌู ูุงูููุน ูุจู XLSX.read ูู app.js. -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <script src="src/firebase-config.js"></script>
    <script>
      (function () {
        if (typeof firebase === 'undefined' || !window.firebaseConfig) return;
        try {
          if (!firebase.apps || firebase.apps.length === 0) {
            firebase.initializeApp(window.firebaseConfig);
          }
          if (typeof firebase.storage === 'function') {
            window.storage = firebase.storage();
          }
        } catch (e) { /* ุตุงูุชุ app.js ุณูุนูุฏ ุงููุญุงููุฉ */ }
      })();
    </script>
    <!-- ูุง ูุญููู ููุง getBlob ุงููุนูุงุฑู โ ุญุฒูุฉ firebase-storage ุชุณุชุฏุนู getApp() ุฏุงุฎููุงู ููุง ุชุฑู ุชุทุจูู compat ูุชูุฑูู ุฎุทุฃ. ุงูุงุนุชูุงุฏ ุนูู ุงูุชุญููู ุงูุฏููุงูููู ุฏุงุฎู fetchStorageJson ููุท. -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <!-- PDF: ุชุญููู ุชูุฑูุฑ ุงูููุธู ุฅูู PDF ูููุดุงุฑูุฉ ุฃู ุงูุชุญููู ููุงุชุณุงุจ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- Arabic Font -->
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Custom Styles (v=dropdowns = ูุงูุฐุฉ ุงูุฎุตููุงุช + ููุงุฆู ููุณุฏูุฉ ุฏุงููุฉ) -->
    <link rel="stylesheet" href="src/styles.css?v=reasons-9px">
</head>

<body class="p-2 sm:p-4 md:p-6">
    <!-- Animated Background Particles -->
    <div class="particles" id="particles"></div>

    <div class="max-w-full mx-auto space-y-3 sm:space-y-4 md:space-y-5 relative z-10 px-2 sm:px-4 md:px-6">
        <!-- Header โ ูุฏูุฌ ููุชูุงุณุจ ูุน ุญุฌู ุงูุฌุฏูู (ุชูููู ุงูุงุฑุชูุงุน ูุงููุณุงูุงุช) -->
        <header class="px-2 sm:px-4 pt-2 sm:pt-3 animate-in no-print">
            <div class="max-w-[1440px] mx-auto glass rounded-xl sm:rounded-2xl md:rounded-2xl border-r-2 sm:border-r-3 md:border-r-4 border-turquoise p-2 sm:p-3 md:p-4">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-3">
                    <div class="flex items-center gap-2 sm:gap-3 w-full sm:w-auto">
                        <div class="flex-shrink-0">
                            <img src="unnamed.png" alt="ุฅููุช" class="w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 object-contain rounded-md" style="max-width: 40px; max-height: 40px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="text-lg hidden" style="animation: pulse 2s infinite;">๐</div>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h1 class="text-base sm:text-lg md:text-xl font-black text-white truncate" style="font-size: clamp(0.9rem, 2.2vw, 1.25rem);">
                                ููุงูุขุช ูุฑูู ุนูู ููุฏู ุฅููุช
                            </h1>
                            <p class="text-xs sm:text-sm md:text-base text-gray-300 mt-0.5 sm:mt-1 font-semibold" style="font-size: clamp(0.75rem, 1.5vw, 0.9375rem);">
                                ุงููุชุฑุฉ: <span id="headerPeriodRange" class="text-turquoise font-bold">-</span>
                            </p>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-1.5 sm:gap-2 w-full sm:w-auto justify-end items-center action-header-btns-container" id="actionBtns" style="display: flex;">
                        <!-- ุฒุฑุงุฑ ุงูุฑุฌูุน ููุธุงู ุงูุชุญููู (ุงููุดุฑูุน ุงูุฃูู) -->
                        <button type="button" id="btnReturnToAnalysis" onclick="returnToAnalysis()"
                            class="action-header-btn action-header-btn--cyan"
                            aria-label="ุฑุฌูุน ููุธุงู ุงูุชุญููู">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
                    <span>ูุธุงู ุงูุชุญููู</span>
                </button>
                <!-- ุฒุฑุงุฑ ุฎุฑูุฌ ุงููุฏูู (ูุฎูู) -->
                <button type="button" id="btnReturnToUpload" onclick="returnToUpload(false, true)"
                    class="action-header-btn action-header-btn--red"
                    data-testid="btn-return-to-upload" aria-label="ุฎุฑูุฌ ุฅูู ุตูุญุฉ ุงูุฑูุน" style="display:none;">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    <span>ุฎุฑูุฌ</span>
                </button>
                <button type="button" onclick="showClosePeriodModal()"
                    class="action-header-btn action-header-btn--red">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                    <span class="hidden sm:inline">ุฅุบูุงู ุงููุชุฑุฉ</span><span class="sm:hidden">ุฅุบูุงู</span>
                </button>
                <button type="button" onclick="showDiscountsModal()"
                    class="action-header-btn action-header-btn-default">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="5" x2="5" y2="19"/><circle cx="6.5" cy="6.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/></svg>
                    <span class="hidden sm:inline">ุงูุฎุตู ุงูุฅุฏุงุฑู</span><span class="sm:hidden">ุฎุตู ุฅุฏุงุฑู</span>
                </button>
                <button type="button" onclick="showReportsPage()"
                    class="action-header-btn action-header-btn-default">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                    <span class="hidden sm:inline">ุงูุชูุงุฑูุฑ</span><span class="sm:hidden">ุชูุงุฑูุฑ</span>
                </button>
                <button type="button" onclick="showConditionsModal()"
                    class="action-header-btn action-header-btn-default">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>
                    <span class="hidden sm:inline">ุดุฑูุท ุงูููุงูุขุช</span><span class="sm:hidden">ุดุฑูุท</span>
                </button>
                <button id="printAllBtn" onclick="smartPrint(false)" type="button"
                    class="action-header-btn action-header-btn--primary">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>
                    <span id="printAllBtnLabel" class="hidden sm:inline">ุทุจุงุนุฉ ุงููู</span><span id="printAllBtnLabelMobile" class="sm:hidden">ุงููู</span>
                </button>
                <button id="printSelectedBtn" onclick="smartPrint(true)" type="button"
                    class="hidden action-header-btn action-header-btn--amber">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                    <span class="hidden sm:inline">ุทุจุงุนุฉ ุงููุญุฏุฏ</span><span class="sm:hidden">ูุญุฏุฏ</span>
                </button>
                <button id="refreshLiveBtn" onclick="refreshLivePeriodFromFirebase()" type="button"
                    class="action-header-btn action-header-btn-default" title="ุฌูุจ ุขุฎุฑ ุงูุชููููุงุช ูุงูุญุถูุฑ ูู ุงููุดุฑู/HR">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 21h5v-5"/></svg>
                    <span class="hidden sm:inline">ุชุญููู ุงูุชุญุฏูุซุงุช</span><span class="sm:hidden">ุชุญุฏูุซ</span>
                </button>
                <button id="adminManageBtn" onclick="showAdminManagementModal()" type="button"
                    class="action-header-btn action-header-btn--violet">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    <span class="hidden sm:inline">ุฅุฏุงุฑุฉ ุงูุฅุฏุงุฑููู</span><span class="sm:hidden">ุฅุฏุงุฑููู</span>
                </button>
                <!-- ุฎุฑูุฌ โ ูุณุฎุฉ ูู ุฒุฑ ุชุทุจูู ุงูุชุญููู: ุชุณุฌูู ุงูุฎุฑูุฌ ูุงูุนูุฏุฉ ูุตูุญุฉ ุงูุฏุฎูู -->
                <button type="button" id="btnLogoutRewards" onclick="returnToUpload(false, true)"
                    class="action-header-btn action-header-btn--red"
                    title="ุฎุฑูุฌ โ ุชุณุฌูู ุงูุฎุฑูุฌ ูุงูุนูุฏุฉ ูุตูุญุฉ ุงูุฏุฎูู" aria-label="ุฎุฑูุฌ">
                    <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    <span>ุฎุฑูุฌ</span>
                </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Upload Zone (hidden โ data comes from Project 1 transfer) -->
        <div id="uploadBox"
            class="glass p-8 sm:p-16 md:p-20 lg:p-24 text-center rounded-2xl sm:rounded-[40px] md:rounded-[60px] border-2 border-dashed border-white/10 cursor-pointer no-print animate-in hidden"
            style="display:none; animation-delay: 0.2s;">
            <input type="file" id="fileInput" class="hidden" accept=".xlsx, .xls, .csv">
            <div onclick="document.getElementById('fileInput').click()" class="space-y-3 sm:space-y-4 md:space-y-5 relative z-10">
                <div class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl" style="font-size: clamp(3rem, 10vw, 6rem);">๐ค</div>
                <h2 class="text-xl sm:text-2xl md:text-3xl font-black text-white" style="font-size: clamp(1.25rem, 4vw, 1.875rem);">ุฑูุน ููู ุงูุชูุฑูุฑ</h2>
                <p class="text-gray-400 text-sm sm:text-base font-semibold" style="font-size: clamp(0.875rem, 2.5vw, 1rem);">
                    ุงุฑูุน ููู ุฅูุณูู ูุฒูู ูุงุณุชุฎุฑุงุฌ ุงูููุงูุขุช
                </p>
                <div class="pt-2 sm:pt-3 md:pt-4">
                    <span class="inline-block px-4 sm:px-5 md:px-6 py-1.5 sm:py-2 bg-white/5 rounded-full text-xs sm:text-sm text-turquoise font-bold" style="font-size: clamp(0.75rem, 2vw, 0.875rem);">
                        ุงุณุญุจ ุงูููู ุฃู ุงููุฑ ููุงุฎุชูุงุฑ
                    </span>
                </div>
            </div>
        </div>

        <!-- Dashboard (visible by default โ data comes from transfer) -->
        <div id="dashboard" class="space-y-4">
            <!-- Print Header (Hidden on Screen) -->
            <div class="print-header">
                <div style="flex: 1; text-align: right;">
                    <h1 style="font-size: 28px; font-weight: 900; color: #000; margin:0; border-bottom: 3px solid #40E0D0; padding-bottom: 10px;">
                        ููุฏู ุฅููุช <span style="color:#40E0D0">Elite Hotel</span>
                    </h1>
                    <p id="reportTitle" style="font-size: 18px; color: #000; margin:10px 0 0 0; font-weight: 800;">
                        ุชูุฑูุฑ ุงุณุชุญูุงู ุงูููุงูุขุช ุงูุฑุณูู
                    </p>
                    <p style="font-size: 14px; color: #333; margin:5px 0 0 0; font-weight: 600;">
                        ููุฏู ุฅูู: ูุณู ุงูุญุณุงุจุงุช - ูุฅุฌุฑุงุก ุตุฑู ุงููุจุงูุบ ุงููุณุชุญูุฉ
                    </p>
                </div>
                <div style="flex: 1; text-align: left;">
                    <div style="border: 2px solid #000; padding: 10px; background: #f9f9f9; margin-bottom: 10px;">
                        <p style="font-size: 14px; color: #000; font-weight: 800; margin: 0;">
                            ุงููุชุฑุฉ: <span id="periodRange" style="font-weight: 900;">-</span>
                        </p>
                        <p style="font-size: 13px; color: #000; margin: 8px 0 0 0; font-weight: 700;">
                            ุชุงุฑูุฎ ุงูุฅุตุฏุงุฑ: <span id="reportDate" style="font-weight: 900;">-</span>
                        </p>
                    </div>
                    <p style="font-size: 11px; color: #666; margin: 5px 0 0 0; font-weight: 500;">
                        ุฑูู ุงูุชูุฑูุฑ: <span id="reportNumber"></span>
                    </p>
                </div>
            </div>

            <!-- Statistics Cards โ ุฃุญุฌุงู ูุฏูุฌุฉ ูุชูุงุณุจ ุงูุฌุฏูู -->
            <div class="stats-grid-container no-print animate-in" style="animation-delay: 0.3s;">
                <!-- Original Cards -->
                <div class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center flex flex-col justify-center min-h-0">
                    <div class="text-sm sm:text-base md:text-lg mb-0.5" style="font-size: clamp(0.75rem, 1.5vw, 1rem);">๐ฅ</div>
                    <div class="text-xs sm:text-sm md:text-base font-black text-turquoise number-display" id="statEmployees" style="font-size: clamp(0.65rem, 1.8vw, 0.9375rem);">0</div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-gray-400 mt-0.5 font-semibold leading-tight">ุฅุฌูุงูู ุงูููุธููู</div>
                </div>
                <div class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center flex flex-col justify-center min-h-0">
                    <div class="text-sm sm:text-base md:text-lg mb-0.5" style="font-size: clamp(0.75rem, 1.5vw, 1rem);">๐</div>
                    <div class="text-xs sm:text-sm md:text-base font-black text-orange-400 number-display" id="statBookings" style="font-size: clamp(0.65rem, 1.8vw, 0.9375rem);">0</div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-gray-400 mt-0.5 font-semibold leading-tight">ุฅุฌูุงูู ุงูุญุฌูุฒุงุช</div>
                </div>
                <div class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center flex flex-col justify-center min-h-0">
                    <div class="text-sm sm:text-base md:text-lg mb-0.5" style="font-size: clamp(0.75rem, 1.5vw, 1rem);">๐ฐ</div>
                    <div class="text-xs sm:text-sm md:text-base font-black text-green-400 number-display" id="statTotal" style="font-size: clamp(0.65rem, 1.8vw, 0.9375rem);">0</div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-gray-400 mt-0.5 font-semibold leading-tight">ุฅุฌูุงูู ุงููุณุชุญูุงุช</div>
                </div>
                <!-- New Cards -->
                <div class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center relative overflow-hidden flex flex-col justify-center min-h-0">
                    <div class="absolute top-0 right-0 w-full h-0.5 bg-gradient-to-r from-yellow-500 to-transparent"></div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-yellow-500 mb-0.5 font-bold">โญ ุงูุฃูุซุฑ ููุงูุฃุฉ</div>
                    <div class="text-[9px] sm:text-[10px] md:text-xs font-black text-white truncate px-0.5" id="topEarnerName" style="font-size: clamp(0.5625rem, 1.4vw, 0.75rem);">-</div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-gray-400 mt-0 number-display" id="topEarnerValue">0</div>
                </div>
                <div class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center relative overflow-hidden flex flex-col justify-center min-h-0">
                    <div class="absolute top-0 right-0 w-full h-0.5 bg-gradient-to-r from-turquoise to-transparent"></div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-turquoise mb-0.5 font-bold">๐ ุงูุฃูุซุฑ ุชููููุงู</div>
                    <div class="text-[9px] sm:text-[10px] md:text-xs font-black text-white truncate px-0.5" id="topRatedName" style="font-size: clamp(0.5625rem, 1.4vw, 0.75rem);">-</div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-gray-400 mt-0 number-display" id="topRatedValue">0</div>
                </div>
                <div class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center relative overflow-hidden flex flex-col justify-center min-h-0">
                    <div class="absolute top-0 right-0 w-full h-0.5 bg-gradient-to-r from-turquoise to-transparent"></div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-turquoise mb-0.5 font-bold">๐ ุงูุฃูุซุฑ ุญุฌูุฒุงุช</div>
                    <div class="text-[9px] sm:text-[10px] md:text-xs font-black text-white truncate px-0.5" id="topBookerName" style="font-size: clamp(0.5625rem, 1.4vw, 0.75rem);">-</div>
                    <div class="text-[7px] sm:text-[8px] md:text-[9px] text-gray-400 mt-0 number-display" id="topBookerValue">0</div>
                </div>
            </div>


            <!-- Branch Filters -->
            <div id="branchFilters" class="flex flex-wrap gap-1.5 sm:gap-2 p-1.5 sm:p-2 bg-white/5 rounded-lg sm:rounded-xl w-full sm:w-fit mx-auto no-print animate-in justify-center"
                style="animation-delay: 0.4s;">
            </div>

            <!-- Table Container -->
            <div class="glass rounded-xl sm:rounded-2xl md:rounded-[30px] overflow-hidden neon-glow animate-in" style="animation-delay: 0.5s;">
                <div class="table-scroll-container">
                    <table id="targetTable" class="w-full text-right">
                        <thead
                            class="table-head-theme text-sm text-turquoise font-black uppercase tracking-wider">
                            <!-- ุตู ุงูุชุฌููุน (ูุซู ุตูุญุฉ ุงูุชุญููู): ูุธูุฑ ููุท ูู ูุถุน ุงูุงุณุชูุจุงู -->
                            <tr id="breakdownGroupRow" class="breakdown-group-row" style="display:none;"></tr>
                            <tr class="main-header-row">
                                <th class="checkbox-col no-print text-right">
                                    <input type="checkbox" id="selectAll" onclick="toggleAll(this)"
                                        class="cursor-pointer accent-turquoise checkbox-custom">
                                </th>
                                <th class="col-m text-right">ู</th>
                                <th class="col-name text-center cursor-pointer hover:bg-white/10 transition-colors select-none" data-sort-key="name" title="ูุฑุฒ ุญุณุจ ุงูููุธู">ุงูููุธู</th>
                                <th class="col-count col-count-single text-center cursor-pointer hover:bg-white/10 transition-colors select-none" data-sort-key="count" title="ูุฑุฒ ุญุณุจ ุงูุญุฌูุฒุงุช">ุงูุญุฌูุฒุงุช</th>
                                <!-- Breakdown: ูุณู ุงูุญุฌูุฒุงุช โ ุญุฏ ูุงุตู ุจูู ุงูููุธู ูุงูุนููุฏ (ุนูู ูููู ุงูุนููุฏ ูู RTL) -->
                                <th class="col-breakdown th-section-end text-center text-cyan-300 text-xs font-bold cursor-pointer hover:bg-white/10 transition-colors select-none" style="display:none;" data-sort-key="staffCount" title="ูุฑุฒ ุญุณุจ ุงูุนููุฏ">ุงูุนููุฏ</th>
                                <th class="col-breakdown text-center text-emerald-300 text-xs font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none" style="display:none;" data-sort-key="reception" title="ูุฑุฒ ุญุณุจ ุงุณุชูุจุงู">ุงุณุชูุจุงู</th>
                                <th class="col-breakdown th-section-start text-center text-orange-300 text-xs font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none" style="display:none;" data-sort-key="booking" title="ูุฑุฒ ุญุณุจ ุจููููุฌ">ุจููููุฌ</th>
                                <!-- ูุณู ุงูุดูุชุงุช โ border-left ุนูู ุขุฎุฑ ุนููุฏ (ููู = ุฃูุณุฑ ุจุตุฑูุงู) -->
                                <th class="col-breakdown text-center text-amber-300 text-xs font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none" style="display:none;" data-sort-key="morning" title="ูุฑุฒ ุญุณุจ ุตุจุงุญ">ุตุจุงุญ</th>
                                <th class="col-breakdown text-center text-indigo-300 text-xs font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none" style="display:none;" data-sort-key="evening" title="ูุฑุฒ ุญุณุจ ูุณุงุก">ูุณุงุก</th>
                                <th class="col-breakdown th-section-start text-center text-gray-300 text-xs font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none" style="display:none;" data-sort-key="night" title="ูุฑุฒ ุญุณุจ ููู">ููู</th>
                                <!-- VIP: ููุญูู ุฏููุงููููุงู ูุน class th-section-start ูุฃูู ุนููุฏ -->
                                <th class="col-breakdown col-breakdown-vip-placeholder text-center text-amber-300 text-xs font-bold" style="display:none;" id="vipColumnsPlaceholder"></th>
                                <!-- ูุณู ุงูุชูุจููุงุช โ border-left ุนูู ุขุฎุฑ ุนููุฏ (ููุต SAR = ุฃูุณุฑ ุจุตุฑูุงู) -->
                                <th class="col-breakdown text-center text-red-300 text-xs font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none" style="display:none;" data-sort-key="alertCount" title="ูุฑุฒ ุญุณุจ ุชูุจูู">ุชูุจูู</th>
                                <th class="col-breakdown th-section-start text-center text-red-300 text-xs font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none" style="display:none;" data-sort-key="alertTotal" title="ูุฑุฒ ุญุณุจ ููุต SAR">ููุต SAR</th>
                                <!-- ุจุฏุงูุฉ ูุณู ุงูุญุถูุฑ ูุงูุชููููุงุช -->
                                <th class="col-attendance th-section-start text-center cursor-pointer hover:bg-white/10 transition-colors select-none" data-sort-key="attendance26Days" title="ูุฑุฒ ุญุณุจ ุจุทู ุชุญุฏู ุงูุธุฑูู"><span class="block text-xs">ุจุทู ุชุญุฏู ุงูุธุฑูู</span><span class="text-[9px] font-normal text-gray-400">(26+ ููู)</span></th>
                                <th class="col-rate text-center">ุงููุฆุฉ</th>
                                <th class="col-eval-booking text-center text-turquoise cursor-pointer hover:bg-white/10 transition-colors select-none" data-sort-key="evaluationsBooking" title="ูุฑุฒ ุญุณุจ BOOKING">
                                    <div class="flex flex-col items-center justify-center gap-0">
                                        <span class="text-[10px] font-bold">BOOKING</span>
                                        <span class="text-[8px] text-gray-400">20 ุฑ.ุณ</span>
                                    </div>
                                </th>
                                <th class="col-eval-google text-center text-green-400 cursor-pointer hover:bg-white/10 transition-colors select-none" data-sort-key="evaluationsGoogle" title="ูุฑุฒ ุญุณุจ GOOGLE">
                                    <div class="flex flex-col items-center justify-center gap-0">
                                        <span class="text-[10px] font-bold">GOOGLE</span>
                                        <span class="text-[8px] text-gray-400">10 ุฑ.ุณ</span>
                                    </div>
                                </th>
                                <th class="col-net text-center th-section-start bg-turquoise/10 text-white font-bold cursor-pointer hover:bg-white/10 transition-colors select-none" data-sort-key="net" title="ูุฑุฒ ุญุณุจ ุงูุตุงูู">ุงูุตุงูู</th>
                            </tr>
                            <tr id="negativeRatingsHeaderRow" class="negative-ratings-header-row no-print">
                                <td colspan="6" class="negative-ratings-label-cell">ุชููููุงุช ุณูุจูุฉ (ุฃูู ูู ุชูููู ุงูููุฏู) + ููุฏุงู ูุฑุต ุญุฌุฒ ูุชูุฌุฉ ุงูููุงููุงุช ุงูุชู ูู ูุชู ุงูุฑุฏ ุนูููุง</td>
                                <td colspan="2" id="negativeRatingsCell" class="py-1 px-1.5 text-center align-middle"></td>
                                <td class="py-1 px-2"></td>
                            </tr>
                        </thead>
                        <tbody id="mainTable" class="divide-y divide-white/10"></tbody>
                        <tfoot class="bg-white/[0.06] font-black border-t-2 border-white/20">
                            <!-- ุตู ุงูุญูุงูุฒ: ุญุงูุฒ ุงูุงูุชุฒุงู ูุงูุงูุฌุงุฒ | ุฎุจูุฑ ุฅุฑุถุงุก ุงูุนููู ูู ุงููุฑุน -->
                            <tr id="bonusesCombinedRow" class="footer-row text-white border-b border-white/10" style="display: none;">
                                <td colspan="100" class="p-2 sm:p-3 text-right align-top">
                                    <div class="flex flex-col sm:flex-row gap-2 sm:gap-3 flex-wrap" style="direction: rtl;">
                                        <div id="commitmentBonusBlock" class="flex-1 min-w-0 rounded-lg bg-white/5 border border-turquoise/30 p-2">
                                            <div class="text-turquoise font-bold text-[11px] sm:text-xs mb-1">ุญุงูุฒ ุงูุงูุชุฒุงู ูุงูุงูุฌุงุฒ</div>
                                            <div id="commitmentBonusText" class="space-y-1.5 text-[10px] sm:text-xs" style="direction: rtl; white-space: normal;"></div>
                                            <div id="commitmentBonusValue" class="text-turquoise font-bold mt-1 number-display text-xs hidden">+0.00</div>
                                        </div>
                                        <div id="excellenceBonusBlock" class="flex-1 min-w-0 rounded-lg bg-white/5 border border-turquoise/30 p-2">
                                            <div class="text-turquoise font-bold text-[11px] sm:text-xs mb-1">ุฎุจูุฑ ุฅุฑุถุงุก ุงูุนููู ูู ุงููุฑุน</div>
                                            <div id="excellenceBonusText" class="space-y-1.5 text-[10px] sm:text-xs" style="direction: rtl; white-space: normal;"></div>
                                            <div id="excellenceBonusValue" class="text-turquoise font-bold mt-1 number-display text-xs hidden">+0.00</div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <!-- Counts Row - Hidden -->
                            <tr class="footer-row text-white border-b border-white/10" style="display: none;">
                                <td class="checkbox-col no-print p-2"></td>
                                <td class="col-m p-2"></td>
                                <td class="col-name p-2 text-right text-sm font-black text-gray-400">
                                    ุงูุฅุฌูุงูู (ุงูุนุฏุฏ)
                                </td>
                                <td id="footBookingCount" class="col-count col-count-single p-2 text-center text-white/70 text-base number-display font-bold">0</td>
                                <!-- Breakdown footer totals (hidden by default) -->
                                <td id="footStaffCount" class="col-breakdown p-1 text-center text-cyan-300 text-xs font-bold font-mono" style="display:none">0</td>
                                <td id="footReception" class="col-breakdown p-1 text-center text-emerald-300 text-xs font-mono" style="display:none">0</td>
                                <td id="footBooking" class="col-breakdown p-1 text-center text-orange-300 text-xs font-mono" style="display:none">0</td>
                                <td id="footMorning" class="col-breakdown p-1 text-center text-amber-300 text-xs font-mono" style="display:none">0</td>
                                <td id="footEvening" class="col-breakdown p-1 text-center text-indigo-300 text-xs font-mono" style="display:none">0</td>
                                <td id="footNight" class="col-breakdown p-1 text-center text-gray-300 text-xs font-mono" style="display:none">0</td>
                                <td id="footVipRooms" class="col-breakdown p-1 text-center text-amber-300 text-xs font-bold font-mono" style="display:none" colspan="1">0</td>
                                <td id="footAlertCount" class="col-breakdown p-1 text-center text-red-400 text-xs font-mono" style="display:none">0</td>
                                <td id="footAlertTotal" class="col-breakdown p-1 text-center text-red-400 text-xs font-mono" style="display:none">0</td>
                                <td class="col-attendance p-2"></td>
                                <td class="col-rate p-2"></td>
                                <td id="footEvalCount" class="p-2 text-center text-yellow-400 text-base border-x border-white/10 number-display font-black">0</td>
                                <td class="col-fund p-2 text-center text-gray-500 text-base border-x border-white/10">-</td>
                                <td class="col-net p-2 text-left px-8 text-gray-500">-</td>
                            </tr>
                            <!-- Bookings Only Value Row - Hidden -->
                            <tr class="footer-row text-white border-b border-white/10" style="display: none;">
                                <td class="checkbox-col no-print p-2"></td>
                                <td class="col-m p-2"></td>
                                <td class="col-name p-2 text-right text-sm font-black text-gray-400">
                                    ุตุงูู ุงูุญุฌูุฒุงุช (ุจุฏูู ุชูููู)
                                </td>
                                <td class="col-count p-2"></td>
                                <td class="col-attendance p-2"></td>
                                <td class="col-rate p-2"></td>
                                <td class="p-2 border-x border-white/10"></td>
                                <td class="col-fund p-2 border-x border-white/10"></td>
                                <td id="footNetNoEval" class="col-net p-2 text-left px-8 text-gray-400 number-display font-bold">-</td>
                            </tr>
                            <!-- Values Row - ุฅุฌูุงูู (ุนูุงู + ููุธููู) -->
                            <tr id="footerRowTotal" class="footer-row footer-summary text-white">
                                <td id="footerTotalLabel" colspan="6" class="footer-summary-label p-2 text-right" style="direction:rtl">
                                    <span class="text-gray-300 text-xs font-bold tracking-wide">ุฅุฌูุงูู</span>
                                    <span class="text-white/30 text-[9px] mr-1">(ุนูุงู + ููุธููู)</span>
                                </td>
                                <td id="footFund" class="footer-summary-val p-2 text-center text-orange-400 font-bold text-xs number-display">0</td>
                                <td id="footNet" class="footer-summary-val footer-summary-net col-net p-2 text-center text-turquoise font-black text-sm number-display total-val-net">0</td>
                            </tr>
                            <!-- Total Team Row - ุฅุฌูุงูู ุงูููุงุฆู ููู ูุฑูู ุงูุนูู -->
                            <tr id="footerRowFinalTotal" class="footer-row footer-summary footer-summary-final text-white">
                                <td id="footerFinalLabel" colspan="6" class="footer-summary-label p-2 text-right" style="direction:rtl">
                                    <span class="text-turquoise text-xs font-bold tracking-wide">ุฅุฌูุงูู ุงูููุงุฆู ููู ูุฑูู ุงูุนูู</span>
                                </td>
                                <td id="footTotalFund" class="footer-summary-val p-2 text-center text-orange-400 font-bold text-xs number-display" style="display: none;">0</td>
                                <td id="footTotalNet" class="footer-summary-val footer-summary-net col-net p-2 text-center text-turquoise font-black text-sm number-display total-val-net" colspan="2">0</td>
                            </tr>
                        </tfoot>
                    </table>
                    
                    <!-- Print Conditions Section - Only visible when printing, populated dynamically -->
                    <div class="print-conditions" style="display: none;">
                        <div id="printConditionsInlineContent" style="margin-top: 30px; padding: 15px; border-top: 3px solid #000; background: #fff;">
                            <!-- Populated by populatePrintConditionsInline() -->
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Reports Page -->
        <div id="reportsPage" class="hidden space-y-4 sm:space-y-6 relative w-full overflow-x-hidden" style="z-index: 1;">
            <div class="glass p-4 sm:p-6 rounded-xl sm:rounded-2xl border border-turquoise/30 w-full min-w-0">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl font-black text-turquoise flex items-center gap-2" style="font-size: clamp(1.125rem, 4vw, 1.5rem);">
                        <span>๐</span>
                        <span>ุชูุงุฑูุฑ ุงูููุธููู</span>
                    </h2>
                    <div class="flex items-center gap-4">
                        <button onclick="printAllEmployeeReports()" class="btn-modern px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 bg-white/[0.07] text-[#14b8a6] rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border border-white/20 flex items-center gap-2 hover:bg-[#14b8a6]/15 hover:border-[#14b8a6]/40 hover:text-white transition-all backdrop-blur-sm" style="font-size: clamp(0.75rem, 2vw, 0.875rem);">
                            <span class="text-base sm:text-lg">๐จ๏ธ</span>
                            <span class="hidden sm:inline">ุทุจุงุนุฉ ูู ุงูุชูุงุฑูุฑ</span>
                            <span class="sm:hidden">ูู ุงูุชูุงุฑูุฑ</span>
                        </button>
                        <button onclick="showEmployeeCodesModal()" class="btn-modern px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 bg-gradient-to-r from-turquoise/80 to-teal-500/80 text-white rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border border-turquoise/30 flex items-center gap-2 hover:shadow-lg hover:from-turquoise hover:to-teal-500 transition-all backdrop-blur-sm" style="font-size: clamp(0.75rem, 2vw, 0.875rem);">
                            <span class="text-base sm:text-lg">๐</span>
                            <span class="hidden sm:inline">ุงูุฃููุงุฏ</span>
                            <span class="sm:hidden">ููุฏ</span>
                        </button>
                        <button onclick="hideReportsPage()" class="btn-modern px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 bg-white/10 text-gray-200 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border border-white/20 flex items-center gap-2 hover:bg-white/15 hover:border-gray-300/50 hover:text-white transition-all backdrop-blur-sm" style="font-size: clamp(0.75rem, 2vw, 0.875rem);">
                            <span class="text-base sm:text-lg">โ</span>
                            <span class="hidden sm:inline">ุฑุฌูุน</span>
                            <span class="sm:hidden">ุฑุฌูุน</span>
                        </button>
                    </div>
                </div>
                
                <!-- Tabs: ุชูุฑูุฑ ุฃููู ุนูู ุงูุฌูุงู (ููุฎูู ูููุฏูุฑ ุงูุนุงู) -->
                <div id="reportsTabsBar" class="flex gap-1 sm:gap-2 mb-4 sm:mb-6 border-b border-white/10 overflow-x-auto -webkit-overflow-scrolling-touch scrollbar-hide" style="scrollbar-width: none;">
                    <button onclick="switchReportsTab('current')" id="reportsTabCurrent" class="flex-shrink-0 px-3 sm:px-4 py-2 text-xs sm:text-sm font-bold text-turquoise border-b-2 border-turquoise transition-colors min-h-[44px]">
                        ุงูุชูุงุฑูุฑ ุงูุญุงููุฉ
                    </button>
                    <button onclick="switchReportsTab('archived')" id="reportsTabArchived" class="flex-shrink-0 px-3 sm:px-4 py-2 text-xs sm:text-sm font-bold text-gray-400 border-b-2 border-transparent hover:text-white transition-colors min-h-[44px]">
                        ุงููุชุฑุงุช ุงููุบููุฉ
                    </button>
                    <button onclick="switchReportsTab('statistics')" id="reportsTabStatistics" class="flex-shrink-0 px-3 sm:px-4 py-2 text-xs sm:text-sm font-bold text-gray-400 border-b-2 border-transparent hover:text-white transition-colors min-h-[44px]">
                        ุงูุฅุญุตุงุฆูุงุช
                    </button>
                </div>
                
                <!-- Current Reports Content -->
                <div id="currentReportsContent">
                <!-- Search and Filter -->
                <div class="mb-6 space-y-4">
                    <input type="text" id="reportsEmployeeSearch" placeholder="๐ ุงุจุญุซ ุนู ููุธู..." 
                        class="w-full px-4 py-3 sm:py-3 rounded-xl text-base sm:text-sm text-white placeholder-gray-300 focus:outline-none min-h-[44px]" 
                        style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2);" 
                        onfocus="this.style.borderColor='rgba(64, 224, 208, 0.6)'; this.style.background='rgba(255, 255, 255, 0.15)';" 
                        onblur="this.style.borderColor='rgba(255, 255, 255, 0.2)'; this.style.background='rgba(255, 255, 255, 0.1)';" 
                        onkeyup="scheduleReportsFilter(this)">
                    
                    <!-- Branch Filter -->
                    <div class="flex flex-wrap gap-2">
                        <button onclick="filterReportsByBranch('ุงููู')" 
                            class="filter-reports-pill active px-4 py-2 rounded-lg text-sm font-bold transition-all text-white shadow-[0_0_20px_rgba(64,224,208,0.3)]" 
                            data-filter="ุงููู">
                            ุงููู
                        </button>
                    </div>
                </div>
                
                <!-- Employees Grid -->
                <div id="reportsEmployeesGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 sm:gap-3 max-h-[70vh] overflow-y-auto">
                    <!-- Employees cards will be populated here -->
                </div>
                </div>
                
                <!-- Archived Periods Content -->
                <div id="archivedReportsContent" class="hidden">
                    <div class="mb-4 flex flex-col sm:flex-row sm:items-end gap-3">
                        <div class="flex-1 min-w-0">
                            <label class="block text-sm font-bold text-gray-300 mb-2">ุงุฎุชุฑ ุงููุชุฑุฉ:</label>
                            <select id="archivedPeriodSelect" onchange="loadArchivedPeriod(this.value)" class="w-full px-4 py-3 rounded-xl text-base sm:text-sm text-white bg-white/10 border border-white/20 focus:outline-none focus:border-turquoise min-h-[44px]">
                                <option value="">-- ุงุฎุชุฑ ูุชุฑุฉ --</option>
                            </select>
                        </div>
                        <button type="button" id="clearArchivedPeriodsBtn" onclick="if(typeof confirmAndClearArchivedPeriods==='function') confirmAndClearArchivedPeriods();" class="flex-shrink-0 px-4 py-3 rounded-xl text-sm font-bold text-amber-200 bg-amber-500/20 border border-amber-500/40 hover:bg-amber-500/30 transition-colors min-h-[44px]" title="ููุณุญ: ุงููุชุฑุงุช ุงููุบููุฉ (ุงููุงุฆูุฉ ุงูููุณุฏูุฉ) + ุฃุฑุดูู ุงูุฅุญุตุงุฆูุงุช. ูุง ููุณุญ: ุงูุฑุตูุฏ ุงูุชุฑุงููู ุฃุจุฏุงู.">
                            <span>๐๏ธ</span>
                            <span>ูุณุญ ูู ุงููุชุฑุงุช (ุจุฏุงูุฉ ุฌุฏูุฏุฉ)</span>
                        </button>
                    </div>
                    <div id="archivedPeriodInfo" class="mb-4 p-4 bg-white/5 rounded-xl border border-white/10 hidden">
                        <p class="text-sm text-gray-300">
                            <span class="font-bold text-turquoise">ุงููุชุฑุฉ:</span> <span id="archivedPeriodText">-</span>
                        </p>
                        <p class="text-sm text-gray-300 mt-2">
                            <span class="font-bold text-turquoise">ุชุงุฑูุฎ ุงูุฅุบูุงู:</span> <span id="archivedClosedAt">-</span>
                        </p>
                        <button type="button" onclick="restoreArchivedPeriodAsCurrent()" class="hidden mt-4 w-full sm:w-auto btn-modern px-4 py-2.5 rounded-xl text-sm font-bold bg-gradient-to-r from-turquoise/80 to-teal-500/80 text-white border border-turquoise/30 flex items-center justify-center gap-2 hover:from-turquoise hover:to-teal-500 transition-all" aria-hidden="true" title="ูุฎูู โ ูุง ููุณูุญ ุจุงูุชุนุฏูู ุนูู ุงููุชุฑุงุช ุงููุบููุฉ">
                            <span>๐</span>
                            <span>ุงุณุชุนุงุฏุฉ ุงููุชุฑุฉ ููุชุนุฏูู</span>
                        </button>
                    </div>
                    <div id="archivedReportsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 max-h-[70vh] overflow-y-auto">
                        <!-- Archived employees will be populated here -->
                    </div>
                </div>

                <!-- Statistics Content (ุดููู ููุชูุงุฑูุฑ ุงูุญุงููุฉ ูุงููุชุฑุงุช ุงููุบููุฉ โ ูุงู ุฏุงุฎู archived ููุงู ููุฎูู ูุนูุง) -->
                <div id="statisticsReportsContent" class="hidden">
                    <!-- ุจุงูุฑ ุนุฑุถ ูุชุฑุฉ ุฃุฑุดูู (ููุธูุฑ ุนูุฏ ุงูุถุบุท ุนูู ุฃููููุฉ ุงูุนูู ูู ูุชุฑุฉ ุณุงุจูุฉุ ูููุฎูู ุนูุฏ ุงูุฑุฌูุน) -->
                    <div id="archivedViewOnlyBanner" class="hidden mb-6 glass p-4 rounded-xl border border-amber-500/40 bg-amber-500/10">
                        <div class="flex flex-wrap items-center justify-between gap-3">
                            <div class="flex items-center gap-2 flex-wrap">
                                <span class="text-lg" aria-hidden="true">๐</span>
                                <span class="text-amber-200 font-bold">ุนุฑุถ ูุชุฑุฉ ุฃุฑุดูู (ุนุฑุถ ููุท)</span>
                                <span id="archivedViewOnlyPeriodText" class="text-white font-medium">โ</span>
                                <span id="archivedViewOnlyClosedAt" class="text-sm text-gray-400">โ</span>
                            </div>
                            <button type="button" onclick="closeArchivedPeriodView()" class="px-4 py-2 rounded-lg text-sm font-bold bg-white/20 text-white border border-white/30 hover:bg-white/30 transition-colors min-h-[44px] flex items-center gap-2">
                                <span>โ</span>
                                <span>ุฑุฌูุน ูููุชุฑุฉ ุงูุญุงููุฉ</span>
                            </button>
                        </div>
                    </div>
                    <!-- ุงูุฑุตูุฏ ุงูุชุฑุงููู ูู ุงูููุงุท (ููุฎูู ูููุฏูุฑ ุงูุนุงู) -->
                    <div class="mb-8" id="cumulativePointsSection">
                        <button type="button" onclick="toggleCumulativePoints()" class="w-full text-xl font-black text-turquoise mb-2 flex items-center gap-2 cursor-pointer hover:text-white transition-colors group">
                            <span id="cumulativePointsArrow" class="transition-transform duration-300 text-base" style="display:inline-block;">โ</span>
                            <span>๐ฐ</span>
                            <span>ุงูุฑุตูุฏ ุงูุชุฑุงููู ูู ุงูููุงุท</span>
                            <span class="text-xs font-normal text-gray-400 group-hover:text-gray-300 mr-2">(ุงุถุบุท ููุชูุณูุน)</span>
                        </button>
                        <div id="cumulativePointsBody" style="display:none;">
                            <ul class="text-sm text-gray-300 mb-4 space-y-2 list-disc list-inside">
                                <li><strong>ุงูููุงูุฃุฉ ุงููุจุฑู:</strong> ุนูุฏ ูุตูู ุงูููุธู ุฅูู 100,000 ููุทุฉ ุชุฑุงูููุฉุ ูุณุชุญู "ุจุงููุฌ" ุงูุชููุฒ:</li>
                                <li><strong>ูุณููุฉ ูุดุชุฑูุงุช ุฃู ุชุฐุงูุฑ ุฃู ูุณุงุฆู:</strong> ุจูุง ูุนุงุฏู 1,500 ุฑูุงู.</li>
                                <li><strong>ุฅูุงูุฉ ูุงุฎุฑุฉ:</strong> ูููุฉ ูุฌุงููุฉ (ููููุธู ุฃู ูุฃุญุฏ ุถูููู) ุตุงูุญุฉ ููุฏุฉ ุณูุฉ.</li>
                                <li><strong>ูุฌุจุฉ ุนุดุงุก:</strong> ุนุดุงุก ูุงุฎุฑ ูุชูุงูู.</li>
                                <li><strong>ูุธุงู ุงูููุงุท:</strong> ุชูุญุชุณุจ ูุชูุถุงู ุงูููุงุท ููููุธููู ุฏูุฑูุงู ูุน ูู ุฅุบูุงู ูุชุฑุฉ.</li>
                            </ul>
                            <div class="flex flex-wrap items-center gap-3 mb-4">
                                <button type="button" id="clearCumulativePointsBtn" onclick="if(typeof confirmAndClearCumulativePoints==='function') confirmAndClearCumulativePoints();" class="flex-shrink-0 px-4 py-2.5 rounded-xl text-sm font-bold text-amber-200 bg-amber-500/20 border border-amber-500/40 hover:bg-amber-500/30 transition-colors min-h-[40px]" title="ููุณุญ ุงูุฑุตูุฏ ุงูุชุฑุงููู ูู Firebase. ูุน ยซูุณุญ ูู ุงููุชุฑุงุชยป = ุจุฏุงูุฉ ูุงููุฉ (ูุง ูุจูู ุฅูุง ุงููุชุฑุฉ ุงูููุชูุญุฉ).">
                                    <span>๐๏ธ</span>
                                    <span>ูุณุญ ุงูุฑุตูุฏ ุงูุชุฑุงููู</span>
                                </button>
                            </div>
                            <div id="cumulativePointsCards" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 mb-6">
                                <!-- ูุฑูุช ุงูุฑุตูุฏ ุงูุชุฑุงููู ุชูููุฃ ุฏููุงููููุงู -->
                            </div>
                        </div>
                    </div>
                    <div class="mb-8" id="currentPeriodStatsBlock">
                        <div id="currentPeriodStatsHeaderBlock">
                            <h3 class="text-xl font-black text-turquoise mb-4 flex items-center gap-2">
                                <span>๐</span>
                                <span id="statisticsSectionTitle">ุฅุญุตุงุฆูุงุช ุงููุชุฑุฉ ุงูุญุงููุฉ</span>
                            </h3>
                            <div id="currentPeriodStats" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6">
                                <!-- Stats cards will be populated here -->
                            </div>
                        </div>
                        <div class="glass p-4 rounded-xl neon-glow mt-6 relative overflow-visible" id="currentPeriodStatsTableWrap">
                            <h4 class="text-lg font-bold text-white mb-4 flex items-center gap-2 flex-wrap">
                                <span>ุฌุฏูู ุชูููู ุงูููุธููู</span>
                                <button type="button" id="ratingExplanationBtn" onclick="showRatingExplanationModal()" class="no-print rating-explanation-btn inline-flex items-center justify-center w-10 h-10 rounded-full bg-turquoise/25 border-2 border-turquoise/60 text-turquoise hover:bg-turquoise/40 hover:border-turquoise hover:scale-110 transition-all duration-300 shadow-[0_0_20px_rgba(64,224,208,0.4)]" title="ููููุฉ ุญุณุงุจ ุงูุชูููู">
                                    <span class="text-base font-black" aria-hidden="true">โ</span>
                                </button>
                                <button type="button" onclick="printCurrentPeriodStats()" class="no-print inline-flex items-center justify-center w-10 h-10 rounded-lg bg-turquoise/20 border border-turquoise/40 text-turquoise hover:bg-turquoise/30 hover:border-turquoise/60 transition-colors" title="ุทุจุงุนุฉ ุฅุญุตุงุฆูุงุช ุงููุชุฑุฉ ุงูุญุงููุฉ">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>
                                </button>
                            </h4>
                            <div class="overflow-x-auto">
                                <table id="employeePerformanceTable" class="w-full text-sm">
                                    <thead>
                                        <tr class="bg-white/10 border-b border-white/20">
                                            <th class="p-3 text-right font-bold text-turquoise">ุงูุชุฑุชูุจ</th>
                                            <th class="p-3 text-right font-bold text-turquoise">ุงุณู ุงูููุธู</th>
                                            <th class="p-3 text-center font-bold text-turquoise">ุงููุฑุน</th>
                                            <th class="p-3 text-center font-bold text-turquoise">ุนุฏุฏ ุงูุญุฌูุฒุงุช</th>
                                            <th class="p-3 text-center font-bold text-turquoise">ุงูุชููููุงุช</th>
                                            <th class="p-3 text-center font-bold text-turquoise">ุงูุตุงูู ุงููุณุชุญู</th>
                                            <th class="p-3 text-center font-bold text-turquoise" title="ุฑุตูุฏ ุงูููุงุท ูู ุงููุชุฑุฉ (ุตุงูู + ูุณุงููุฉ 15%). ููุชูุงุตูู ุงุถุบุท ุนูู ุงูุงุณู.">ุงูููุงุท</th>
                                        </tr>
                                    </thead>
                                    <tbody id="employeePerformanceTableBody">
                                        <!-- Rows will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 hidden" id="archivedPeriodsSection" aria-hidden="true">
                        <h3 class="text-xl font-black text-turquoise mb-4 flex items-center gap-2">
                            <span>๐</span>
                            <span>ุฅุญุตุงุฆูุงุช ุงููุชุฑุงุช ุงูุณุงุจูุฉ</span>
                        </h3>
                        <div id="archivedPeriodsStatsContainer" class="space-y-6">
                            <!-- Each archived period will be displayed here separately -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ูุคุดุฑ ูุฒุงููุฉ ุงููุชุฑุฉ ุงูุญูุฉ (ูุธูุฑ ุฃุซูุงุก ุฌูุจ ุงูุจูุงูุงุช ูู Firebase) -->
        <div id="liveSyncIndicator" class="live-sync-indicator no-print" aria-hidden="true" style="display: none;">
            <span class="live-sync-spinner" aria-hidden="true"></span>
            <span class="live-sync-label">ุฌุงุฑู ุงูุชุญุฏูุซ...</span>
        </div>

        <!-- Developer Signature (ูุฎูู) -->
        <footer class="mt-12 mb-2 text-center" aria-hidden="true" style="display: none !important;">
            <p class="text-[9px] text-gray-400/50 font-extralight tracking-wider no-print">
                ุชู ุงูุชูููุฐ ุจูุงุณุทุฉ
                <span class="text-gray-300/60">ุงููู ุงุจู ูุฑุฏู</span>
                <span class="mx-1.5">โข</span>
                <span class="text-gray-300/50">0570707121</span>
                <span class="mx-1.5">โข</span>
                <span class="text-gray-300/50">7aayy@gmail.com</span>
            </p>
            <!-- Print version - always visible in print -->
            <p class="print-only" style="display: none;">
                ุชู ุงูุชูููุฐ ุจูุงุณุทุฉ ุงููู ุงุจู ูุฑุฏู โข 0570707121 โข 7aayy@gmail.com
            </p>
        </footer>
    </div>

    <!-- Conditions Modal (Moved outside container to fix z-index issue) -->
    <div id="conditionsModal" class="fixed inset-0 z-[999] hidden flex items-center justify-center bg-black/60 backdrop-blur-sm p-2 sm:p-4" onclick="closeConditionsModal(event)" style="z-index: 999 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto min-w-0" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 1px solid rgba(64, 224, 208, 0.3);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>๐</span>
                    <span>ุดุฑูุท ุงูุญุตูู ุนูู ุงูููุงูุขุช</span>
                </h2>
                <button onclick="closeConditionsModal()" class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center">&times;</button>
            </div>
            <!-- Dynamic content populated by populateConditionsModalContent() -->
            <div id="conditionsModalContent" class="space-y-4"></div>
                    <div class="mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end">
                        <button onclick="printConditions()" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]">
                            <span>๐จ๏ธ</span>
                            <span>ุทุจุงุนุฉ ุงูุดุฑูุท</span>
                        </button>
                        <button onclick="closeConditionsModal()" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                            ุฅุบูุงู
                        </button>
                    </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ููููุฉ ุญุณุงุจ ุงูุชูููู (ุชุธูุฑ ูู ุตูุญุฉ ุงูุฅุญุตุงุฆูุงุช ููุท) -->
    <div id="ratingExplanationModal" class="fixed inset-0 z-[999] hidden flex items-center justify-center bg-black/60 backdrop-blur-sm p-2 sm:p-4" onclick="closeRatingExplanationModal(event)" style="z-index: 999 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto min-w-0" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 1px solid rgba(64, 224, 208, 0.3);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>๐</span>
                    <span>ููููุฉ ุญุณุงุจ ุงูุชูููู</span>
                </h2>
                <button type="button" onclick="closeRatingExplanationModal()" class="text-gray-400 hover:text-white transition-colors text-2xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-white/10">&times;</button>
            </div>
            <div class="space-y-4 text-sm text-gray-300">
                <p class="text-gray-200 font-medium leading-relaxed">
                    ุนููุฏ <strong class="text-turquoise">ยซุงูููุงุทยป</strong> ูู ุงูุฌุฏูู = <strong class="text-white">ุฑุตูุฏ ุงูููุงุท ูู ุงููุชุฑุฉ</strong> (ุตุงูู ุงููุณุชุญู + ูุณุงููุฉ 15% ูุนุฑูุถ ูููุงุท) โ ููุณ ุงูููููู ูู ุงูุชูุฑูุฑ ุนูุฏ ุงูุถุบุท ุนูู ุงูุงุณู. <strong class="text-white">ูุณุชูู ุงูุฃุฏุงุก</strong> (ููุชุงุฒ/ุฌูุฏ/ุณูุก) ููุญุณุจ ูู ุฃุฏุงุฆู ููุงุฑูุฉู ุจุจุงูู ุงูููุธููู ูููุนุฑุถ ุชุญุช ุงูููุงุท ููุชูุถูุญ. ูููุง ููู ุดุฑุญ ููููุฉ ุญุณุงุจ ูุณุชูู ุงูุฃุฏุงุก:
                </p>

                <div class="bg-turquoise/10 rounded-xl p-4 border border-turquoise/30">
                    <h3 class="text-base font-bold text-turquoise mb-3 flex items-center gap-2">
                        <span>1.</span>
                        <span>ูุง ุงูุฐู ููุคุฎุฐ ูู ุงูุงุนุชุจุงุฑุ</span>
                    </h3>
                    <ul class="space-y-2 list-none">
                        <li class="flex items-start gap-2">
                            <span class="text-turquoise font-bold mt-0.5">โข</span>
                            <span><strong class="text-white">ุนุฏุฏ ุงูุญุฌูุฒุงุช:</strong> ูููุง ูุงู ุนุฏุฏ ุญุฌูุฒุงุชู ุฃูุฑุจ ุฅูู ุฃุนูู ููุธู ูู ุงููุฑููุ ุฒุงุฏุช ููุงุทู ูู ูุฐุง ุงูุฌุฒุก.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-turquoise font-bold mt-0.5">โข</span>
                            <span><strong class="text-white">ุงูุชููููุงุช (Booking ู Google):</strong> ูููุง ูุงู ุฅุฌูุงูู ุชููููุงุชู ุฃูุฑุจ ุฅูู ุฃุนูู ููุธูุ ุฒุงุฏุช ููุงุทู.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-turquoise font-bold mt-0.5">โข</span>
                            <span><strong class="text-white">ุงูุญุถูุฑ 26 ููู ูุฃูุซุฑ:</strong> ุฅุฐุง ุฃุชููุช 26 ูููุงู ูุฃูุซุฑ ูู ุงูุนุทุงุก (ุจุทู ุชุญุฏู ุงูุธุฑูู)ุ ููุถุงู ูู <strong class="text-green-400">+0.15</strong> ุนูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูููุงูุฃุฉ ุงูุชุฒุงู.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-red-400 font-bold mt-0.5">โข</span>
                            <span><strong class="text-white">ุงูุฎุตู ุงูุฅุฏุงุฑู:</strong> ุฅุฐุง ูุงู ุนููู ุฎุตู ุฅุฏุงุฑู ุจุฃู ูููุฉุ ูุชู <strong class="text-red-400">ุชุฎููุถ ุงูุชูููู ุจููุฏุงุฑ 0.25</strong> ููุนูุณ ุชุฃุซูุฑ ุงูุชูุตูุฑ ุนูู ุงูุฃุฏุงุก.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-red-400 font-bold mt-0.5">โข</span>
                            <span><strong class="text-white">ุฎุตู ุชูููู ุงูููุฏู (ุชููููุงุช ุณูุจูุฉ) ูููุฏุงู ูุฑุต ุญุฌุฒ (ููุงููุงุช ูู ููุฑุฏ ุนูููุง):</strong> ุฅุฐุง ุณุฌูู ุงููุฑุน ุชููููุงุช ุณูุจูุฉ (ุฃูู ูู ุชูููู ุงูููุฏู) ุฃู ููุฏุงู ูุฑุต ุญุฌุฒ ูุชูุฌุฉ ุงูููุงููุงุช ุงูุชู ูู ูุชู ุงูุฑุฏ ุนูููุงุ ููุฎุตู <strong class="text-red-400">10 ุฑูุงู ร ุนุฏุฏ ุงูุชููููุงุช ุงูุณูุจูุฉ ูููุฑุน</strong> ูู ุตุงูู ูู ููุธู ูู ุฐูู ุงููุฑุนุ ูููููุต ููุงุท ุงูุชูููู (ูุซุงู: 5 ุชููููุงุช ุณูุจูุฉ = 50 ุฑูุงู ูู ุตุงูู ูู ููุธู ูู ุงููุฑุน).</span>
                        </li>
                    </ul>
                </div>

                <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                    <h3 class="text-base font-bold text-turquoise mb-3 flex items-center gap-2">
                        <span>2.</span>
                        <span>ููู ุชูุชุฑุฌู ุงููุชูุฌุฉ ุฅูู ููุงุท ููุณุชููุ</span>
                    </h3>
                    <p class="text-gray-200 mb-3 leading-relaxed">
                        <strong class="text-white">ูุณุชูู ุงูุฃุฏุงุก</strong> (ููุชุงุฒ/ุฌูุฏ/ุณูุก) ููุญุณุจ ูู ูุชูุฌุฉ ุฏุงุฎููุฉ (ุจุนุฏ ุงูุญุถูุฑ ูุงูุฎุตู) ุชูุญูููู ุฅูู <strong class="text-white">ููุงุท ูู 0 ุฅูู 100</strong>ุ ุซู ููุญุฏููุฏ ุงููุณุชูู ุญุณุจ ุงูุฌุฏูู ุงูุชุงูู (ูููุนุฑุถ ุชุญุช ุนููุฏ ยซุงูููุงุทยป ูู ุงูุฌุฏูู):
                    </p>
                    <ul class="space-y-2 list-none">
                        <li class="flex items-start gap-2">
                            <span class="text-green-400 font-bold">โข</span>
                            <span><strong class="text-green-400">ููุชุงุฒ:</strong> ูู 90 ุฅูู 100 ููุทุฉ.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-green-300 font-bold">โข</span>
                            <span><strong class="text-green-300">ุฌูุฏ:</strong> ูู 80 ุฅูู ุฃูู ูู 90 ููุทุฉ.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-400 font-bold">โข</span>
                            <span><strong class="text-yellow-400">ูุชูุณุท:</strong> ูู 60 ุฅูู ุฃูู ูู 80 ููุทุฉ.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-orange-400 font-bold">โข</span>
                            <span><strong class="text-orange-400">ุถุนูู:</strong> ูู 40 ุฅูู ุฃูู ูู 60 ููุทุฉ.</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-red-400 font-bold">โข</span>
                            <span><strong class="text-red-400">ุณูุก:</strong> ุฃูู ูู 40 ููุทุฉ.</span>
                        </li>
                    </ul>
                </div>

                <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                    <p class="text-gray-200 leading-relaxed">
                        <strong class="text-turquoise">ููุงุญุธุฉ:</strong> <strong class="text-white">ุงูููุงุท</strong> ูู ุงูุฌุฏูู = ุฑุตูุฏ ุงูููุงุท ูู ุงููุชุฑุฉ (ุตุงูู + 15%). <strong class="text-white">ูุณุชูู ุงูุฃุฏุงุก</strong> (ููุชุงุฒ โ ุณูุก) ูุนูุณ ุฃุฏุงุกู ููุงุฑูุฉู ุจุจุงูู ุงูููุธููู. ุชูุคุฎุฐ ูุฐู ุงููุชุงุฆุฌ ุจุนูู ุงูุงุนุชุจุงุฑ ุนูุฏ ูุธุฑ ุงูุฅุฏุงุฑุฉ ูู ูุฑุงุฑุงุช ูุซู ุฒูุงุฏุฉ ุงูุฑุงุชุจ ูุงููููุฒุงุช ูุณุชูุจูุงู. <span class="text-turquoise/90 font-medium">ุญุงูุธ ุนูู ุฃุฏุงุฆู ูุชุนุฒูุฒ ูุฑุตู ูู ุงูุฒูุงุฏุงุช ูุงูููุงูุขุช.</span>
                    </p>
                </div>

                <div class="bg-turquoise/5 rounded-xl p-4 border border-turquoise/20">
                    <h3 class="text-base font-bold text-turquoise mb-2 flex items-center gap-2">
                        <span>3.</span>
                        <span>ููุฎุต ุณุฑูุน</span>
                    </h3>
                    <p class="text-gray-200 leading-relaxed">
                        <strong class="text-white">ุงูููุงุท</strong> ูู ุงูุฌุฏูู = ุฑุตูุฏ ุงูููุงุท ูู ุงููุชุฑุฉ (ุตุงูู + 15%). <strong class="text-white">ูุณุชูู ุงูุฃุฏุงุก</strong> (ููุชุงุฒ โ ุณูุก) ููุจูู ุนูู ุฃุฏุงุก ุงูุญุฌูุฒุงุช ูุงูุชููููุงุช ุจุงููุณุจุฉ ูุจุงูู ุงูููุธูููุ ูุน <strong class="text-green-400">ููุงูุฃุฉ ููุญุถูุฑ 26 ููู ูุฃูุซุฑ</strong>ุ ู<strong class="text-red-400">ุชุฎููุถ ุนูุฏ ูุฌูุฏ ุฎุตู ุฅุฏุงุฑู ุฃู ุฎุตู ุชูููู ุงูููุฏู</strong>. ูููุง ููุช ุฃูุฑุจ ููุฃุนูู ูููุชุฒูุงู ุจุงูุญุถูุฑ (ูุจูุง ุฎุตู)ุ ุงุฑุชูุน ูุณุชูู ุฃุฏุงุฆู ุฅูู ยซููุชุงุฒยป.
                    </p>
                </div>
            </div>
            <div class="mt-4 sm:mt-6 flex justify-end">
                <button type="button" onclick="closeRatingExplanationModal()" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ูุงุฆุญุฉ ุงูุชุนูููุงุช -->
    <div id="instructionsModal" class="fixed inset-0 z-[1001] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4" onclick="closeInstructionsModal(event)" style="z-index: 1001 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-3xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-hidden flex flex-col min-w-0" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.98) 0%, rgba(26, 31, 53, 0.98) 100%); border: 1px solid rgba(64, 224, 208, 0.3);">
            <div class="flex items-center justify-between mb-4 flex-shrink-0">
                <h2 class="text-lg sm:text-xl font-black text-turquoise flex items-center gap-2">
                    <span>๐</span>
                    <span>ูุงุฆุญุฉ ุชุนูููุงุช ูุณูุงุณุงุช ุนูู ููุธูู ุงูุงุณุชูุจุงู</span>
                </h2>
                <button type="button" onclick="closeInstructionsModal()" class="text-gray-400 hover:text-white transition-colors text-2xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-white/10">&times;</button>
            </div>
            <div id="instructionsModalBody" class="overflow-y-auto flex-1 pr-1 space-y-4 text-sm text-gray-300 leading-relaxed" style="min-height: 0;">
                <!-- ููุนุจูุฃ ูู JS -->
            </div>
            <div class="mt-4 flex-shrink-0 pt-3 border-t border-white/10 flex flex-wrap gap-2 justify-end">
                <button type="button" onclick="printInstructionsModal()" class="glass px-4 sm:px-6 py-2.5 rounded-lg text-sm font-bold text-turquoise hover:bg-turquoise/10 border border-turquoise/30 transition-colors min-h-[44px] flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>
                    <span>ุทุจุงุนุฉ ุงููุงุฆุญุฉ</span>
                </button>
                <button type="button" onclick="closeInstructionsModal()" class="glass px-4 sm:px-6 py-2.5 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px] w-full sm:w-auto">
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- Employee Report Modal (Moved outside container to fix z-index issue) -->
    <div id="employeeReportModal" class="fixed inset-0 z-[1000] hidden flex items-center justify-center p-2 sm:p-4" onclick="closeEmployeeReportModal(event)" style="background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 1000 !important;">
        <div class="rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto min-w-0" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 1) 0%, rgba(26, 31, 53, 1) 100%); border: 2px solid rgba(64, 224, 208, 0.6); box-shadow: 0 25px 70px rgba(0, 0, 0, 0.9), 0 0 50px rgba(64, 224, 208, 0.4);">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>๐</span>
                    <span id="reportEmployeeName">ุชูุฑูุฑ ุงูููุธู</span>
                </h2>
                <button onclick="event.stopPropagation(); closeEmployeeReportModal();" class="text-gray-400 hover:text-white transition-colors text-2xl font-bold">&times;</button>
            </div>
            <div id="employeeReportContent" class="space-y-4">
                <!-- Report content will be populated here -->
            </div>
            <div class="mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end">
                <button onclick="printEmployeeReport()" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]">
                    <span>๐จ๏ธ</span>
                    <span>ุทุจุงุนุฉ ุงูุชูุฑูุฑ</span>
                </button>
                <button onclick="event.stopPropagation(); downloadEmployeeReportPdf();" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]" title="ุชุญููู ุชูุฑูุฑ ุงูููุธู ูููู PDF">
                    <span>๐ฅ</span>
                    <span>ุชุญููู PDF</span>
                </button>
                <button onclick="event.stopPropagation(); shareEmployeeReportViaWhatsApp();" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]" title="ุชุญููู ุฅูู PDF ุซู ูุดุงุฑูุฉ ุฃู ูุชุญ ูุงุชุณุงุจ ูุฅุฑุณุงูู">
                    <span>๐ฌ</span>
                    <span>ุฅุฑุณุงู PDF ุนูู ุงููุงุชุณุงุจ</span>
                </button>
                <button onclick="event.stopPropagation(); openProgressReportPage();" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]">
                    <span>๐</span>
                    <span>ููุงุณ ูุณุชูู ุงูุชูุฏู</span>
                </button>
                <button onclick="event.stopPropagation(); closeEmployeeReportModal();" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- Close Period Modal -->
    <div id="closePeriodModal" class="fixed inset-0 z-[1001] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4" onclick="closeClosePeriodModal(event)" style="z-index: 1001 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-md w-full max-h-[95vh] overflow-y-auto min-w-0" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 2px solid rgba(239, 68, 68, 0.5);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-red-400 flex items-center gap-2">
                    <span>๐</span>
                    <span>ุฅุบูุงู ุงููุชุฑุฉ</span>
                </h2>
                <button onclick="closeClosePeriodModal()" class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center">&times;</button>
            </div>
            <div class="space-y-4">
                <div class="bg-red-500/10 rounded-xl p-4 border border-red-500/30">
                    <p class="text-sm text-gray-300 mb-2">
                        <span class="font-bold text-red-400">ุชูุจูู:</span> ุณูุชู ุฅุบูุงู ุงููุชุฑุฉ ุงูุญุงููุฉ ูุฃุฑุดูุชูุง ูู Firebase Storage.
                    </p>
                    <p class="text-sm text-gray-300">
                        ุงููุชุฑุฉ: <span id="closePeriodPeriodText" class="text-turquoise font-bold">-</span>
                    </p>
                </div>
                <div class="bg-yellow-500/10 rounded-xl p-4 border border-yellow-500/30">
                    <p class="text-xs text-yellow-300">
                        โ๏ธ ุจุนุฏ ุงูุฅุบูุงูุ ุณูุชู ูุณุญ ุฌููุน ุงูุจูุงูุงุช ุงูุญุงููุฉ ูุงูุนูุฏุฉ ูุตูุญุฉ ุงูุฑูุน.
                    </p>
                </div>
            </div>
            <div class="mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end">
                <button onclick="confirmClosePeriod()" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold bg-white/[0.07] text-red-300 border border-white/20 hover:bg-red-500/15 hover:border-red-400/40 hover:text-red-200 transition-all flex items-center justify-center gap-2 min-h-[44px]">
                    <span>๐</span>
                    <span>ุชุฃููุฏ ุงูุฅุบูุงู</span>
                </button>
                <button onclick="closeClosePeriodModal()" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    ุฅูุบุงุก
                </button>
            </div>
        </div>
    </div>

    <!-- Employee Codes Modal -->
    <div id="employeeCodesModal" class="fixed inset-0 z-[1002] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4" onclick="closeEmployeeCodesModal(event)" style="z-index: 1002 !important;">
        <div class="glass rounded-2xl p-4 sm:p-6 md:p-8 max-w-4xl w-full mx-2 sm:mx-4 max-h-[95vh] overflow-y-auto" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 2px solid rgba(64, 224, 208, 0.5);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>๐</span>
                    <span>ุฃููุงุฏ ุงูููุธููู</span>
                </h2>
                <button onclick="closeEmployeeCodesModal()" class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center">&times;</button>
            </div>
            <div id="employeeCodesContent" class="space-y-6">
                <!-- Employee Codes Section -->
                <div>
                    <h3 class="text-lg font-bold text-turquoise mb-4 flex items-center gap-2">
                        <span>๐ค</span>
                        <span>ุฃููุงุฏ ุงูููุธููู</span>
                    </h3>
                    <div id="employeeCodesList" class="space-y-3">
                        <!-- Employee codes will be populated here -->
                    </div>
                </div>
                
                <!-- Admin Links Section -->
                <div class="border-t border-white/10 pt-6">
                    <h3 class="text-lg font-bold text-turquoise mb-4 flex items-center gap-2">
                        <span>๐ฅ</span>
                        <span>ุฑูุงุจุท ุงูุฅุฏุงุฑููู</span>
                    </h3>
                    <div id="adminLinksList" class="space-y-3">
                        <!-- Admin links will be populated here -->
                    </div>
                </div>
            </div>
            <div class="mt-4 sm:mt-6 flex justify-end">
                <button onclick="closeEmployeeCodesModal()" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Management Modal -->
    <div id="adminManagementModal" class="fixed inset-0 z-[1004] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4" onclick="closeAdminManagementModal(event)" style="z-index: 1004 !important;">
            <div class="glass rounded-2xl p-4 sm:p-6 md:p-8 max-w-5xl w-full mx-2 sm:mx-4 max-h-[95vh] overflow-y-auto" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 2px solid rgba(64, 224, 208, 0.4);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>๐ฅ</span>
                    <span>ุฅุฏุงุฑุฉ ุงูุฅุฏุงุฑููู</span>
                </h2>
                <button onclick="closeAdminManagementModal()" class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center">&times;</button>
            </div>
            <div id="adminManagementContent" class="space-y-6">
                <!-- Admin management content will be populated here -->
            </div>
            <div class="mt-4 sm:mt-6 flex justify-end">
                <button onclick="closeAdminManagementModal()" class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- Discounts Modal -->
    <div id="discountsModal" class="fixed inset-0 z-[1003] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4" onclick="closeDiscountsModal(event)" style="z-index: 1003 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 max-w-3xl w-full mx-2 sm:mx-4 max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.98) 0%, rgba(26, 31, 53, 0.98) 100%); border: 2px solid rgba(239, 68, 68, 0.4); box-shadow: 0 20px 60px rgba(239, 68, 68, 0.2);">
            <!-- Header -->
            <div class="flex items-center justify-between mb-5 pb-3 border-b border-white/10">
                <h2 class="text-lg sm:text-xl font-black text-red-400 flex items-center gap-2">
                    <span class="text-xl">๐ฐ</span>
                    <span>ุฅุฏุงุฑุฉ ุงูุฎุตููุงุช</span>
                </h2>
                <button onclick="closeDiscountsModal()" class="text-gray-400 hover:text-white transition-colors text-2xl font-bold min-w-[36px] min-h-[36px] flex items-center justify-center hover:bg-white/10 rounded-lg">&times;</button>
            </div>
            
            <!-- Add Discount Form -->
            <div class="mb-6 space-y-3">
                <!-- Employee Selection -->
                <div class="glass p-2.5 sm:p-3 rounded-lg border border-white/10">
                    <label class="block text-xs font-bold text-gray-200 mb-1.5 flex items-center gap-1.5">
                        <span class="text-turquoise">๐ค</span>
                        <span>ุงูููุธู:</span>
                    </label>
                    <select id="discountEmployeeSelect" onchange="updateDiscountEmployeeInfo()" class="w-full px-2.5 py-2 rounded-lg text-xs sm:text-sm text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[#14b8a6] focus:ring-2 focus:ring-[#14b8a6]/30 transition-all min-h-[36px]">
                        <option value="">-- ุงุฎุชุฑ ุงูููุธู --</option>
                    </select>
                    <p class="text-[9px] text-gray-400 mt-1 flex items-center gap-1">
                        <span>โน๏ธ</span>
                        <span>ุงูุฎุตู ููุทุจู ุนูู ุงูููุธู ูู ูู ุงููุฑูุน (ูุซู ุตูุญุฉ "ุงููู")</span>
                    </p>
                </div>
                
                <!-- Selected Employee Info -->
                <div id="selectedEmployeeInfo" class="hidden glass p-2.5 sm:p-3 rounded-lg border border-turquoise/30 bg-gradient-to-r from-turquoise/10 to-transparent">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-1.5">
                        <div class="space-y-1">
                            <p class="text-xs text-gray-200">
                                <span class="font-bold text-turquoise">ุงูููุธู:</span> 
                                <span id="selectedEmployeeName" class="text-white font-semibold">-</span>
                            </p>
                            <p class="text-xs text-gray-200">
                                <span class="font-bold text-turquoise">ุงูุตุงูู ุงูุญุงูู (ูุฌูุน):</span> 
                                <span id="selectedEmployeeNet" class="text-white font-bold text-sm">-</span> 
                                <span class="text-gray-400">ุฑูุงู</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Discount Type and Percentage -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-2.5 sm:gap-3">
                    <!-- Discount Type -->
                    <div class="glass p-2.5 sm:p-3 rounded-lg border border-white/10" style="position: relative; z-index: 30;">
                        <label class="block text-xs font-bold text-gray-200 mb-1.5 flex items-center gap-1.5">
                            <span class="text-red-400">๐ท๏ธ</span>
                            <span>ููุน ุงูุฎุตู:</span>
                        </label>
                        <div class="flex gap-2 items-stretch" style="position: relative; z-index: 30;">
                            <select id="discountTypeSelect" class="flex-1 min-w-0 px-3 py-2.5 rounded-lg text-sm text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[#14b8a6] focus:ring-2 focus:ring-[#14b8a6]/30 transition-all min-h-[44px] cursor-pointer" style="position: relative; z-index: 30;">
                                <option value="">-- ุงุฎุชุฑ ููุน ุงูุฎุตู --</option>
                            </select>
                            <button onclick="showManageDiscountTypesModal()" class="btn-modern flex-shrink-0 px-3 py-2.5 bg-white/10 text-gray-200 rounded-lg text-sm font-bold border border-white/20 hover:bg-white/15 hover:border-turquoise/40 transition-all min-h-[44px] min-w-[44px] w-11 flex items-center justify-center relative z-[35]" title="ุฅุฏุงุฑุฉ ุฃููุงุน ุงูุฎุตููุงุช" style="z-index: 35 !important;">
                                โ๏ธ
                            </button>
                        </div>
                    </div>
                    
                    <!-- Discount Percentage -->
                    <div class="glass p-2.5 sm:p-3 rounded-lg border border-white/10" style="position: relative; z-index: 1;">
                        <label class="block text-xs font-bold text-gray-200 mb-1.5 flex items-center gap-1.5">
                            <span class="text-red-400">๐</span>
                            <span>ูุณุจุฉ ุงูุฎุตู (%):</span>
                        </label>
                        <input type="number" id="discountPercentageInput" min="1" max="100" step="0.1" placeholder="ูุซุงู: 5" class="w-full px-2.5 py-2 rounded-lg text-xs sm:text-sm text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[#14b8a6] focus:ring-2 focus:ring-[#14b8a6]/30 transition-all min-h-[36px]">
                        <p class="text-[9px] text-gray-400 mt-1">ูู <span class="text-red-400 font-bold">1%</span> ุฅูู <span class="text-red-400 font-bold">100%</span></p>
                    </div>
                </div>
                
                <!-- Event Date -->
                <div class="glass p-2.5 sm:p-3 rounded-lg border border-white/10">
                    <label class="block text-xs font-bold text-gray-200 mb-1.5 flex items-center gap-1.5">
                        <span class="text-red-400">๐</span>
                        <span>ุชุงุฑูุฎ ุงูุญุฏุซ:</span>
                    </label>
                    <input type="date" id="discountEventDateInput" class="w-full px-2.5 py-2 rounded-lg text-xs sm:text-sm text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[#14b8a6] focus:ring-2 focus:ring-[#14b8a6]/30 transition-all min-h-[36px]">
                    <p class="text-[9px] text-gray-400 mt-1">ุชุงุฑูุฎ ุญุฏูุซ ุงูุชูุตูุฑ ุฃู ุงููุฎุงููุฉ</p>
                </div>
                
                <!-- Add Button -->
                <button onclick="addDiscount()" class="btn-modern w-full px-3 py-2.5 bg-white/[0.07] text-[#14b8a6] rounded-lg text-xs sm:text-sm font-bold border border-white/20 hover:bg-[#14b8a6]/15 hover:border-[#14b8a6]/40 hover:text-white transition-all backdrop-blur-sm min-h-[40px] flex items-center justify-center gap-2">
                    <span class="text-base">โ</span>
                    <span>ุฅุถุงูุฉ ุฎุตู</span>
                </button>
            </div>
            
            <!-- Discounts List -->
            <div class="mt-6 border-t border-white/10 pt-4">
                <h3 class="text-sm sm:text-base font-bold text-white mb-3 flex items-center gap-2">
                    <span class="text-red-400">๐</span>
                    <span>ุงูุฎุตููุงุช ุงููุทุจูุฉ:</span>
                </h3>
                <div id="discountsList" class="space-y-2 max-h-[280px] overflow-y-auto pr-2">
                    <!-- Discounts will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- ุนุฑุถ ุฃุณุจุงุจ ุงูุฎุตููุงุช ูุชูุงุฑูุฎูุง ูููููุง (ูู ูุงุฑุช ุฃูุซุฑ ุงูููุธููู ุฎุตููุงุช) -->
    <div id="mostDiscountsDetailModal" class="fixed inset-0 z-[1005] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm" onclick="closeMostDiscountsDetailModal(event)" style="z-index: 1005 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 max-w-2xl w-full mx-2 sm:mx-4 max-h-[85vh] overflow-y-auto" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.98) 0%, rgba(26, 31, 53, 0.98) 100%); border: 2px solid rgba(239, 68, 68, 0.4);">
            <div class="flex items-center justify-between mb-4 pb-3 border-b border-white/10">
                <h2 class="text-lg sm:text-xl font-black text-red-400 flex items-center gap-2">
                    <span>๐ฐ</span>
                    <span id="mostDiscountsDetailTitle">ุฃุณุจุงุจ ุงูุฎุตููุงุช ูุชูุงุฑูุฎูุง ูููููุง</span>
                </h2>
                <button type="button" onclick="closeMostDiscountsDetailModal()" class="text-gray-400 hover:text-white transition-colors text-2xl font-bold min-w-[36px] min-h-[36px] flex items-center justify-center hover:bg-white/10 rounded-lg">&times;</button>
            </div>
            <div id="mostDiscountsDetailBody" class="space-y-3 text-sm text-gray-200">
                <!-- ููุนุจูุฃ ุจูุงุณุทุฉ showMostDiscountsDetail -->
            </div>
        </div>
    </div>

    <!-- Manage Discount Types Modal -->
    <div id="manageDiscountTypesModal" class="fixed inset-0 z-[1004] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4" onclick="closeManageDiscountTypesModal(event)" style="z-index: 1004 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 max-w-2xl w-full mx-2 sm:mx-4 max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()" style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.98) 0%, rgba(26, 31, 53, 0.98) 100%); border: 2px solid rgba(239, 68, 68, 0.4); box-shadow: 0 20px 60px rgba(239, 68, 68, 0.2);">
            <!-- Header -->
            <div class="flex items-center justify-between mb-4 sm:mb-5 pb-3 border-b border-white/10">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-red-400 flex items-center gap-2">
                    <span class="text-xl sm:text-2xl">โ๏ธ</span>
                    <span>ุฅุฏุงุฑุฉ ุฃููุงุน ุงูุฎุตููุงุช</span>
                </h2>
                <button onclick="closeManageDiscountTypesModal()" class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[40px] min-h-[40px] flex items-center justify-center hover:bg-white/10 rounded-lg">&times;</button>
            </div>
            
            <!-- Add New Type -->
            <div class="mb-5 glass p-3 sm:p-4 rounded-lg border border-white/10">
                <label class="block text-xs sm:text-sm font-bold text-gray-200 mb-2 flex items-center gap-2">
                    <span class="text-turquoise">โ</span>
                    <span>ุฅุถุงูุฉ ููุน ุฎุตู ุฌุฏูุฏ:</span>
                </label>
                <div class="flex gap-2">
                    <input type="text" id="newDiscountTypeInput" placeholder="ุฃุฏุฎู ููุน ุฎุตู ุฌุฏูุฏ..." class="flex-1 px-3 py-2.5 rounded-lg text-sm text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[#14b8a6] focus:ring-2 focus:ring-[#14b8a6]/30 transition-all min-h-[40px]">
                    <button onclick="addDiscountType()" class="btn-modern px-4 py-2.5 bg-white/[0.07] text-[#14b8a6] rounded-lg text-xs sm:text-sm font-bold border border-white/20 hover:bg-[#14b8a6]/15 hover:border-[#14b8a6]/40 hover:text-white transition-all backdrop-blur-sm min-h-[40px] flex items-center justify-center gap-2">
                        <span>โ</span>
                        <span class="hidden sm:inline">ุฅุถุงูุฉ</span>
                    </button>
                </div>
            </div>
            
            <!-- Types List -->
            <div class="mb-5">
                <h3 class="text-base sm:text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <span class="text-red-400">๐</span>
                    <span>ุฃููุงุน ุงูุฎุตููุงุช ุงููุชุงุญุฉ:</span>
                </h3>
                <div id="discountTypesList" class="space-y-2 max-h-[300px] overflow-y-auto pr-2">
                    <!-- Discount types will be populated here -->
                </div>
            </div>
            
            <!-- Footer Buttons -->
            <div class="mt-4 sm:mt-5 pt-4 border-t border-white/10 flex justify-end gap-2">
                <button onclick="closeManageDiscountTypesModal()" class="btn-modern px-4 py-2 bg-white/10 text-gray-200 rounded-lg text-xs sm:text-sm font-bold border border-white/20 hover:bg-white/15 hover:border-gray-300/50 hover:text-white transition-all backdrop-blur-sm min-h-[40px]">
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- ุชูููู ุถุฌูุฌ console ูู ุงูุฅูุชุงุฌ (ุฅุจูุงุก console.error ููุฃุฎุทุงุก ุงูุญููููุฉ) -->
    <script>
      (function() {
        if (typeof window === 'undefined') return;
        var h = window.location.hostname || '';
        if (h === 'localhost' || h === '127.0.0.1' || h === '') return;
        var noop = function() {};
        if (typeof console !== 'undefined') {
          if (console.log) console.log = noop;
          if (console.warn) console.warn = noop;
        }
      })();
    </script>
    <!-- ุงูุจููุฏ ุงูู 55 ููุชุนูููุงุช/ุฃููุงุน ุงูุฎุตู (ูุจู ุฃู ุณูุฑุจุช ูุญุชุงุฌูุง) -->
    <script src="src/discount-clauses-55.js"></script>
    <!-- ูุญุฏุงุช ุงูููุงูุขุช: firebase ุซู rbac ุซู table ุซู app-extensions ุซู ููุทุฉ ุงูุฏุฎูู app.js -->
    <script src="src/rewards-firebase.js"></script>
    <script src="src/rewards-rbac.js"></script>
    <script src="src/rewards-table.js"></script>
    <script src="src/app-extensions.js?v=reasons-row-small"></script>
    <script src="src/app.js?v=bonus-dedup-5"></script>
</body>

</html>
