<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <base href="/Rewards/rewards/">
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: data: 'unsafe-inline' 'unsafe-eval';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#14b8a6">
    <script>
        (function () { var v = localStorage.getItem('adora_theme'); if (v !== 'dark' && v !== 'light') v = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark'; document.documentElement.setAttribute('data-theme', v); })();
    </script>
    <script type="module" src="shared/theme.js"></script>
    <meta name="description" content="Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ÙƒØ§ÙØ¢Øª ÙÙ†Ø¯Ù‚ Ø¥Ù„ÙŠØª">
    <title>Ø¥Ù„ÙŠØª | ÙƒØ´Ù Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</title>
    <!-- ØªÙ‚Ù†ÙŠ: ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase Ø¹Ù†Ø¯ ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ -->
    <link rel="preconnect" href="https://firebasestorage.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Libraries -->
    <!-- Tailwind CDN: Ù„Ù„ØªØ·ÙˆÙŠØ±/Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙÙ‚Ø·. Ù„Ù„Ø¥Ù†ØªØ§Ø¬: Ø§Ø³ØªØ®Ø¯Ù… PostCSS Ø£Ùˆ Tailwind CLI (Ø±Ø§Ø¬Ø¹ https://tailwindcss.com/docs/installation) -->
    <script defer src="https://cdn.tailwindcss.com"></script>
    <!-- SheetJS Ùˆ html2pdf ÙŠÙØ­Ù…Ù‘Ù„Ø§Ù† Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† app.js (ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠ) -->
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-storage-compat.js"></script>
    <script src="src/firebase-config.js"></script>
    <script src="src/admin-config.js"></script>
    <script>
        (function () {
            if (typeof firebase === 'undefined' || !window.firebaseConfig) return;
            try {
                if (!firebase.apps || firebase.apps.length === 0) {
                    firebase.initializeApp(window.firebaseConfig);
                }
                if (typeof firebase.storage === 'function') {
                    window.storage = firebase.storage();
                }
            } catch (e) { /* ØµØ§Ù…ØªØ› app.js Ø³ÙŠØ¹ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© */ }
        })();
    </script>
    <!-- Ù„Ø§ Ù†Ø­Ù…Ù‘Ù„ Ù‡Ù†Ø§ getBlob Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ â€” Ø­Ø²Ù…Ø© firebase-storage ØªØ³ØªØ¯Ø¹ÙŠ getApp() Ø¯Ø§Ø®Ù„ÙŠØ§Ù‹ ÙˆÙ„Ø§ ØªØ±Ù‰ ØªØ·Ø¨ÙŠÙ‚ compat ÙØªÙØ±Ù…ÙŠ Ø®Ø·Ø£. Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ø¯Ø§Ø®Ù„ fetchStorageJson ÙÙ‚Ø·. -->
    <script defer src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <!-- PDF: ÙŠÙØ­Ù…Ù‘Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† app.js Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø·Ù„Ø¨ ØªØ­Ù…ÙŠÙ„/Ù…Ø´Ø§Ø±ÙƒØ© PDF -->

    <!-- Arabic Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;600;700&display=swap"
        rel="stylesheet">

    <!-- Custom Styles (v=dropdowns = Ù†Ø§ÙØ°Ø© Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª + Ù‚ÙˆØ§Ø¦Ù… Ù…Ù†Ø³Ø¯Ù„Ø© Ø¯Ø§ÙƒÙ†Ø©) -->
    <link rel="stylesheet" href="src/styles.css?v=reasons-9px">
    <!-- Critical: Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± + Ø¸Ù‡ÙˆØ± Ù†Øµ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· Ù‚Ø¨Ù„ ØªØ­Ù…ÙŠÙ„ Tailwind (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ù…Ù„Ù Ø®Ø§Ø±Ø¬ÙŠ) -->
    <style>
        .action-header-btn {
            display: inline-flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            font-family: var(--adora-font-sans, 'IBM Plex Sans Arabic', 'Segoe UI', sans-serif);
            padding: clamp(0.4rem, 1vw, 0.625rem) clamp(0.6rem, 1.5vw, 1rem) !important;
            font-size: clamp(0.75rem, 1.3vw, 0.9375rem) !important;
            font-weight: 500;
            border-radius: clamp(0.5rem, 1vw, 0.75rem) !important;
            gap: clamp(0.25rem, 0.5vw, 0.5rem) !important;
            white-space: nowrap;
            backdrop-filter: blur(8px);
            transition: background-color .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease;
            letter-spacing: .01em;
            border: 1px solid var(--adora-border, rgba(255, 255, 255, 0.2));
            outline: none;
        }

        .action-header-btn-default,
        .action-header-btn.action-header-btn-default {
            color: var(--adora-text, rgb(226 232 240));
            background: rgba(255, 255, 255, 0.07);
        }

        .action-header-btn-default:hover,
        .action-header-btn.action-header-btn-default:hover {
            background: var(--adora-hover-bg, rgba(20, 184, 166, 0.2));
            border-color: var(--adora-focus-border, rgba(20, 184, 166, 0.5));
            color: var(--adora-text, #fff);
        }

        .action-header-btn-default:focus-visible,
        .action-header-btn.action-header-btn-default:focus-visible {
            box-shadow: 0 0 0 2px var(--adora-focus-border, rgba(20, 184, 166, 0.5));
        }

        .action-header-btn--red {
            color: rgb(252 165 165);
            background: rgba(255, 255, 255, 0.07);
        }

        .action-header-btn--red:hover {
            background: rgba(239, 68, 68, 0.15);
            border-color: rgba(248, 113, 113, 0.4);
            color: rgb(254 202 202);
        }

        .action-header-btn--cyan {
            color: var(--adora-text-secondary, rgb(148 163 184));
            background: rgba(255, 255, 255, 0.06);
        }

        .action-header-btn--cyan:hover {
            background: var(--adora-hover-bg, rgba(20, 184, 166, 0.12));
            border-color: var(--adora-focus-border, rgba(20, 184, 166, 0.35));
            color: var(--adora-text, rgb(226 232 240));
        }

        .action-header-btn--amber {
            color: var(--adora-text-secondary, rgb(148 163 184));
            background: rgba(255, 255, 255, 0.06);
        }

        .action-header-btn--amber:hover {
            background: var(--adora-hover-bg, rgba(20, 184, 166, 0.12));
            border-color: var(--adora-focus-border, rgba(20, 184, 166, 0.35));
            color: var(--adora-text, rgb(226 232 240));
        }

        .action-header-btn--violet {
            color: var(--adora-text-secondary, rgb(148 163 184));
            background: rgba(255, 255, 255, 0.06);
        }

        .action-header-btn--violet:hover {
            background: var(--adora-hover-bg, rgba(20, 184, 166, 0.12));
            border-color: var(--adora-focus-border, rgba(20, 184, 166, 0.35));
            color: var(--adora-text, rgb(226 232 240));
        }

        .action-header-btn--primary {
            color: var(--adora-accent, #14b8a6);
            background: rgba(255, 255, 255, 0.07);
        }

        .action-header-btn--primary:hover {
            background: var(--adora-hover-bg, rgba(20, 184, 166, 0.15));
            border-color: var(--adora-focus-border, rgba(20, 184, 166, 0.4));
            color: var(--adora-text, #fff);
        }

        .action-header-btn::before {
            content: none;
        }

        .action-header-btn:active {
            transform: scale(0.98);
        }

        .action-header-btn:disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .action-header-btn svg {
            width: clamp(0.75rem, 1.2vw, 1rem) !important;
            height: clamp(0.75rem, 1.2vw, 1rem) !important;
            flex-shrink: 0;
        }

        .action-header-btns-container {
            gap: clamp(0.35rem, 0.8vw, 0.75rem) !important;
        }

        .action-header-btns-container .action-header-btn {
            min-height: 44px !important;
            padding: 0.5rem 0.875rem !important;
            font-size: 0.8125rem !important;
            transition: all .3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            border-radius: 0.75rem !important;
            gap: 0.375rem !important;
        }

        .action-header-btns-container .action-header-btn svg {
            width: 1rem !important;
            height: 1rem !important;
        }

        @media(max-width:480px) {
            .action-header-btn {
                min-height: 36px !important;
                min-width: 36px !important;
            }

            .action-header-btns-container .action-header-btn {
                min-height: 42px !important;
            }
        }

        @media(min-width:481px) and (max-width:640px) {
            .action-header-btn {
                min-height: 38px !important;
            }

            .action-header-btns-container .action-header-btn {
                min-height: 44px !important;
            }
        }

        [data-theme="light"] .action-header-btn {
            border-color: var(--adora-border);
        }

        [data-theme="light"] .action-header-btn-default,
        [data-theme="light"] .action-header-btn.action-header-btn-default {
            color: var(--adora-text);
            background: rgba(100, 116, 139, 0.08);
        }

        [data-theme="light"] .action-header-btn--primary {
            color: var(--adora-accent);
            background: var(--adora-hover-bg);
        }

        [data-theme="light"] .action-header-btn--red,
        [data-theme="light"] .action-header-btn--cyan,
        [data-theme="light"] .action-header-btn--amber,
        [data-theme="light"] .action-header-btn--violet {
            background: rgba(100, 116, 139, 0.08);
        }

        .action-btn-label-long {
            display: none;
        }

        .action-btn-label-short {
            display: inline;
        }

        @media(min-width:640px) {
            .action-btn-label-long {
                display: inline;
            }

            .action-btn-label-short {
                display: none;
            }
        }
    </style>
</head>

<body class="p-2 sm:p-4 md:p-6">
    <!-- Ø·Ø¨Ù‚Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ù† Ø§Ù„ØªØ­Ù„ÙŠÙ„: ØªØ¸Ù‡Ø± ÙÙˆØ±Ø§Ù‹ Ø¹Ù†Ø¯ transfer=1 ÙˆØªÙØ®ÙÙ‰ Ø¹Ù†Ø¯ Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© -->
    <div id="transferLoadingOverlay"
        class="fixed inset-0 z-[9998] items-center justify-center bg-[#0f172a]/95 backdrop-blur-md hidden"
        style="display: none;">
        <div class="flex flex-col items-center gap-5 rounded-2xl px-8 py-8 shadow-2xl border border-[#14b8a6]/40 bg-[#0f172a] min-w-[280px]"
            style="font-family: 'IBM Plex Sans Arabic', sans-serif;">
            <div class="w-12 h-12 rounded-full border-2 border-[#14b8a6] border-t-transparent animate-spin"
                style="animation: spin 0.8s linear infinite;"></div>
            <p class="text-white font-bold text-base">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª...</p>
            <p class="text-gray-400 text-sm">ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­</p>
        </div>
    </div>
    <script>
        (function () {
            if (typeof window === 'undefined' || !window.location || window.location.search.indexOf('transfer=1') < 0) return;
            document.body.classList.add('adora-transfer-loading');
            var el = document.getElementById('transferLoadingOverlay');
            if (el) { el.classList.add('flex'); el.style.display = 'flex'; }
        })();
    </script>
    <style>
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        #transferLoadingOverlay.flex {
            display: flex !important;
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø­ØªÙ‰ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„Ø±Ø³Ù… â€” ÙŠÙ…Ù†Ø¹ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø¯ÙˆÙ† Ø³ØªØ§ÙŠÙ„ */
        body.adora-transfer-loading .rewards-main-content {
            opacity: 0;
            pointer-events: none;
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ù‚Ø§Ø· Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø­ØªÙ‰ Ù„Ø§ ØªØ¸Ù‡Ø± Ø®Ø·ÙˆØ·/Ø­Ø±ÙƒØ© ØºÙŠØ± Ù…Ù†Ø³Ù‚Ø© */
        body.adora-transfer-loading .particles {
            opacity: 0 !important;
        }
    </style>
    <!-- Animated Background Particles -->
    <div class="particles" id="particles"></div>

    <div
        class="max-w-full mx-auto space-y-3 sm:space-y-4 md:space-y-5 relative z-10 px-2 sm:px-4 md:px-6 rewards-main-content">
        <!-- Header â€” Ù…Ø¯Ù…Ø¬ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø­Ø¬Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ (ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ ÙˆØ§Ù„Ù…Ø³Ø§ÙØ§Øª) -->
        <header class="px-2 sm:px-4 pt-2 sm:pt-3 animate-in no-print">
            <div
                class="max-w-[1440px] mx-auto glass rounded-xl sm:rounded-2xl md:rounded-2xl border-r-2 sm:border-r-3 md:border-r-4 border-turquoise p-2 sm:p-3 md:p-4">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-3">
                    <div class="flex items-center gap-2 sm:gap-3 w-full sm:w-auto">
                        <div class="flex-shrink-0">
                            <img src="unnamed.png" alt="Ø¥Ù„ÙŠØª"
                                class="w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 object-contain rounded-md"
                                style="max-width: 40px; max-height: 40px;"
                                onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="text-lg hidden" style="animation: pulse 2s infinite;">ğŸ’</div>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h1 class="text-base sm:text-lg md:text-xl font-black text-white truncate"
                                style="font-size: clamp(0.9rem, 2.2vw, 1.25rem);">
                                Ù…ÙƒØ§ÙØ¢Øª ÙØ±ÙŠÙ‚ Ø¹Ù…Ù„ ÙÙ†Ø¯Ù‚ Ø¥Ù„ÙŠØª
                            </h1>
                            <p class="text-xs sm:text-sm md:text-base text-gray-300 mt-0.5 sm:mt-1 font-semibold"
                                style="font-size: clamp(0.75rem, 1.5vw, 0.9375rem);">
                                Ø§Ù„ÙØªØ±Ø©: <span id="headerPeriodRange" class="text-turquoise font-bold">-</span>
                            </p>
                        </div>
                    </div>
                    <button type="button" id="themeToggleBtn" class="theme-toggle-btn no-print"
                        title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­/Ø§Ù„Ø¯Ø§ÙƒÙ†" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…">
                        <span class="theme-icon theme-icon-sun" aria-hidden="true"><svg class="w-5 h-5"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="4" />
                                <path d="M12 2v2" />
                                <path d="M12 20v2" />
                                <path d="m4.93 4.93 1.41 1.41" />
                                <path d="m17.66 17.66 1.41 1.41" />
                                <path d="M2 12h2" />
                                <path d="M20 12h2" />
                                <path d="m6.34 17.66-1.41 1.41" />
                                <path d="m19.07 4.93-1.41 1.41" />
                            </svg></span>
                        <span class="theme-icon theme-icon-moon hidden" aria-hidden="true"><svg class="w-5 h-5"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
                            </svg></span>
                    </button>
                    <div class="flex flex-wrap gap-1.5 sm:gap-2 w-full sm:w-auto justify-end items-center action-header-btns-container"
                        id="actionBtns" style="display: flex;">
                        <!-- Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„ (Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„) -->
                        <button type="button" id="btnReturnToAnalysis" onclick="returnToAnalysis()"
                            class="action-header-btn action-header-btn--cyan" aria-label="Ø±Ø¬ÙˆØ¹ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <line x1="19" y1="12" x2="5" y2="12" />
                                <polyline points="12 19 5 12 12 5" />
                            </svg>
                            <span>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„</span>
                        </button>
                        <!-- Ø²Ø±Ø§Ø± Ø®Ø±ÙˆØ¬ Ø§Ù„Ù‚Ø¯ÙŠÙ… (Ù…Ø®ÙÙŠ) -->
                        <button type="button" id="btnReturnToUpload" onclick="returnToUpload(false, true)"
                            class="action-header-btn action-header-btn--red" data-testid="btn-return-to-upload"
                            aria-label="Ø®Ø±ÙˆØ¬ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø±ÙØ¹" style="display:none;">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                                <polyline points="16 17 21 12 16 7" />
                                <line x1="21" y1="12" x2="9" y2="12" />
                            </svg>
                            <span>Ø®Ø±ÙˆØ¬</span>
                        </button>
                        <button type="button" onclick="showClosePeriodModal()"
                            class="action-header-btn action-header-btn--red">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                                <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                            </svg>
                            <span class="action-btn-label-long hidden sm:inline">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙØªØ±Ø©</span><span
                                class="action-btn-label-short sm:hidden">Ø¥ØºÙ„Ø§Ù‚</span>
                        </button>
                        <button type="button" onclick="showDiscountsModal()"
                            class="action-header-btn action-header-btn-default">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <line x1="19" y1="5" x2="5" y2="19" />
                                <circle cx="6.5" cy="6.5" r="2.5" />
                                <circle cx="17.5" cy="17.5" r="2.5" />
                            </svg>
                            <span class="action-btn-label-long hidden sm:inline">Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</span><span
                                class="action-btn-label-short sm:hidden">Ø®ØµÙ… Ø¥Ø¯Ø§Ø±ÙŠ</span>
                        </button>
                        <button type="button" onclick="showReportsPage()"
                            class="action-header-btn action-header-btn-default">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <line x1="18" y1="20" x2="18" y2="10" />
                                <line x1="12" y1="20" x2="12" y2="4" />
                                <line x1="6" y1="20" x2="6" y2="14" />
                            </svg>
                            <span class="action-btn-label-long hidden sm:inline">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span><span
                                class="action-btn-label-short sm:hidden">ØªÙ‚Ø§Ø±ÙŠØ±</span>
                        </button>
                        <button type="button" onclick="showConditionsModal()"
                            class="action-header-btn action-header-btn-default">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                <polyline points="14 2 14 8 20 8" />
                                <line x1="16" y1="13" x2="8" y2="13" />
                                <line x1="16" y1="17" x2="8" y2="17" />
                                <line x1="10" y1="9" x2="8" y2="9" />
                            </svg>
                            <span class="action-btn-label-long hidden sm:inline">Ø´Ø±ÙˆØ· Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</span><span
                                class="action-btn-label-short sm:hidden">Ø´Ø±ÙˆØ·</span>
                        </button>
                        <button id="printAllBtn" onclick="smartPrint(false)" type="button"
                            class="action-header-btn action-header-btn--primary">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="6 9 6 2 18 2 18 9" />
                                <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" />
                                <rect x="6" y="14" width="12" height="8" />
                            </svg>
                            <span id="printAllBtnLabel" class="action-btn-label-long hidden sm:inline">Ø·Ø¨Ø§Ø¹Ø©
                                Ø§Ù„ÙƒÙ„</span><span id="printAllBtnLabelMobile"
                                class="action-btn-label-short sm:hidden">Ø§Ù„ÙƒÙ„</span>
                        </button>
                        <button id="exportPdfTableAllBtn" onclick="exportPdfTableAll()" type="button"
                            class="action-header-btn action-header-btn-default"
                            title="ØªØµØ¯ÙŠØ± Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ„ PDF (ØµÙÙˆÙØŒ ØµØ§ÙÙŠØŒ ØªÙ‚ÙŠÙŠÙ…Ø§ØªØŒ Ø­Ø¶ÙˆØ±)">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                <polyline points="14 2 14 8 20 8" />
                                <line x1="12" y1="18" x2="12" y2="12" />
                                <line x1="9" y1="15" x2="15" y2="15" />
                            </svg>
                            <span class="action-btn-label-long hidden sm:inline">ØªØµØ¯ÙŠØ± PDF</span><span
                                class="action-btn-label-short sm:hidden">PDF</span>
                        </button>
                        <button id="printSelectedBtn" onclick="smartPrint(true)" type="button"
                            class="hidden action-header-btn action-header-btn--amber">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10" />
                                <circle cx="12" cy="12" r="6" />
                                <circle cx="12" cy="12" r="2" />
                            </svg>
                            <span class="action-btn-label-long hidden sm:inline">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯</span><span
                                class="action-btn-label-short sm:hidden">Ù…Ø­Ø¯Ø¯</span>
                        </button>
                        <button id="refreshLiveBtn" onclick="refreshLivePeriodFromFirebase()" type="button"
                            class="action-header-btn action-header-btn-default"
                            title="Ø¬Ù„Ø¨ Ø¢Ø®Ø± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ÙˆØ§Ù„Ø­Ø¶ÙˆØ± Ù…Ù† Ø§Ù„Ù…Ø´Ø±Ù/HR">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                                <path d="M3 3v5h5" />
                                <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" />
                                <path d="M16 21h5v-5" />
                            </svg>
                            <span class="action-btn-label-long hidden sm:inline">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª</span><span
                                class="action-btn-label-short sm:hidden">ØªØ­Ø¯ÙŠØ«</span>
                        </button>
                        <button id="adminManageBtn" onclick="showAdminManagementModal()" type="button"
                            class="action-header-btn action-header-btn--violet">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                            </svg>
                            <span class="action-btn-label-long hidden sm:inline">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†</span><span
                                class="action-btn-label-short sm:hidden">Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†</span>
                        </button>
                        <!-- Ø®Ø±ÙˆØ¬ â€” Ù†Ø³Ø®Ø© Ù…Ù† Ø²Ø± ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ­Ù„ÙŠÙ„: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
                        <button type="button" id="btnLogoutRewards" onclick="returnToUpload(false, true)"
                            class="action-header-btn action-header-btn--red"
                            title="Ø®Ø±ÙˆØ¬ â€” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„" aria-label="Ø®Ø±ÙˆØ¬">
                            <svg class="w-4 h-4 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                                <polyline points="16 17 21 12 16 7" />
                                <line x1="21" y1="12" x2="9" y2="12" />
                            </svg>
                            <span>Ø®Ø±ÙˆØ¬</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Upload Zone (hidden â€” data comes from Project 1 transfer) -->
        <div id="uploadBox"
            class="glass p-8 sm:p-16 md:p-20 lg:p-24 text-center rounded-2xl sm:rounded-[40px] md:rounded-[60px] border-2 border-dashed border-white/10 cursor-pointer no-print animate-in hidden"
            style="display:none; animation-delay: 0.2s;">
            <input type="file" id="fileInput" class="hidden" accept=".xlsx, .xls, .csv">
            <div onclick="document.getElementById('fileInput').click()"
                class="space-y-3 sm:space-y-4 md:space-y-5 relative z-10">
                <div class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl"
                    style="font-size: clamp(3rem, 10vw, 6rem);">ğŸ“¤</div>
                <h2 class="text-xl sm:text-2xl md:text-3xl font-black text-white"
                    style="font-size: clamp(1.25rem, 4vw, 1.875rem);">Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„ØªÙ‚Ø±ÙŠØ±</h2>
                <p class="text-gray-400 text-sm sm:text-base font-semibold"
                    style="font-size: clamp(0.875rem, 2.5vw, 1rem);">
                    Ø§Ø±ÙØ¹ Ù…Ù„Ù Ø¥ÙƒØ³ÙŠÙ„ Ù†Ø²ÙŠÙ„ Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
                </p>
                <div class="pt-2 sm:pt-3 md:pt-4">
                    <span
                        class="inline-block px-4 sm:px-5 md:px-6 py-1.5 sm:py-2 bg-white/5 rounded-full text-xs sm:text-sm text-turquoise font-bold"
                        style="font-size: clamp(0.75rem, 2vw, 0.875rem);">
                        Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„Ù Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±
                    </span>
                </div>
            </div>
        </div>

        <!-- Dashboard (visible by default â€” data comes from transfer) -->
        <div id="dashboard" class="space-y-4">
            <!-- Print Header (Hidden on Screen) -->
            <div class="print-header">
                <div style="flex: 1; text-align: right;">
                    <h1
                        style="font-size: 28px; font-weight: 900; color: #000; margin:0; border-bottom: 3px solid #40E0D0; padding-bottom: 10px;">
                        ÙÙ†Ø¯Ù‚ Ø¥Ù„ÙŠØª <span style="color:#40E0D0">Elite Hotel</span>
                    </h1>
                    <p id="reportTitle" style="font-size: 18px; color: #000; margin:10px 0 0 0; font-weight: 800;">
                        ØªÙ‚Ø±ÙŠØ± Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ø±Ø³Ù…ÙŠ
                    </p>
                    <p style="font-size: 14px; color: #333; margin:5px 0 0 0; font-weight: 600;">
                        Ù…Ù‚Ø¯Ù… Ø¥Ù„Ù‰: Ù‚Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª - Ù„Ø¥Ø¬Ø±Ø§Ø¡ ØµØ±Ù Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©
                    </p>
                </div>
                <div style="flex: 1; text-align: left;">
                    <div style="border: 2px solid #000; padding: 10px; background: #f9f9f9; margin-bottom: 10px;">
                        <p style="font-size: 14px; color: #000; font-weight: 800; margin: 0;">
                            Ø§Ù„ÙØªØ±Ø©: <span id="periodRange" style="font-weight: 900;">-</span>
                        </p>
                        <p style="font-size: 13px; color: #000; margin: 8px 0 0 0; font-weight: 700;">
                            ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±: <span id="reportDate" style="font-weight: 900;">-</span>
                        </p>
                    </div>
                    <p style="font-size: 11px; color: #666; margin: 5px 0 0 0; font-weight: 500;">
                        Ø±Ù‚Ù… Ø§Ù„ØªÙ‚Ø±ÙŠØ±: <span id="reportNumber"></span>
                    </p>
                </div>
            </div>

            <!-- Statistics Cards â€” Ø£Ø­Ø¬Ø§Ù… Ù…Ø¯Ù…Ø¬Ø© Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
            <div class="stats-grid-container no-print animate-in" style="animation-delay: 0.3s;">
                <!-- Original Cards -->
                <div
                    class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center flex flex-col justify-center min-h-0">
                    <div class="text-sm sm:text-base md:text-lg mb-0.5" style="font-size: clamp(0.75rem, 1.5vw, 1rem);">
                        ğŸ‘¥</div>
                    <div class="text-xs sm:text-sm md:text-base font-black text-turquoise number-display"
                        id="statEmployees" style="font-size: clamp(0.65rem, 1.8vw, 0.9375rem);">0</div>
                    <div
                        class="text-[12px] sm:text-[13px] md:text-[16px] text-gray-400 mt-0.5 font-semibold leading-tight">
                        Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
                </div>
                <div
                    class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center flex flex-col justify-center min-h-0">
                    <div class="text-sm sm:text-base md:text-lg mb-0.5" style="font-size: clamp(0.75rem, 1.5vw, 1rem);">
                        ğŸ“Š</div>
                    <div class="text-xs sm:text-sm md:text-base font-black text-orange-400 number-display"
                        id="statBookings" style="font-size: clamp(0.65rem, 1.8vw, 0.9375rem);">0</div>
                    <div
                        class="text-[12px] sm:text-[13px] md:text-[16px] text-gray-400 mt-0.5 font-semibold leading-tight">
                        Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</div>
                </div>
                <div
                    class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center flex flex-col justify-center min-h-0">
                    <div class="text-sm sm:text-base md:text-lg mb-0.5" style="font-size: clamp(0.75rem, 1.5vw, 1rem);">
                        ğŸ’°</div>
                    <div class="text-xs sm:text-sm md:text-base font-black text-green-400 number-display" id="statTotal"
                        style="font-size: clamp(0.65rem, 1.8vw, 0.9375rem);">0</div>
                    <div
                        class="text-[12px] sm:text-[13px] md:text-[16px] text-gray-400 mt-0.5 font-semibold leading-tight">
                        Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª</div>
                </div>
                <!-- New Cards -->
                <div
                    class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center relative overflow-hidden flex flex-col justify-center min-h-0">
                    <div class="absolute top-0 right-0 w-full h-0.5 bg-gradient-to-r from-yellow-500 to-transparent">
                    </div>
                    <div class="text-[12px] sm:text-[13px] md:text-[16px] text-yellow-500 mb-0.5 font-bold">â­ Ø§Ù„Ø£ÙƒØ«Ø±
                        Ù…ÙƒØ§ÙØ£Ø©</div>
                    <div class="text-[9px] sm:text-[10px] md:text-xs font-black text-white truncate px-0.5"
                        id="topEarnerName" style="font-size: clamp(0.5625rem, 1.4vw, 0.75rem);">-</div>
                    <div class="text-[12px] sm:text-[13px] md:text-[16px] text-gray-400 mt-0 number-display"
                        id="topEarnerValue">0</div>
                </div>
                <div
                    class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center relative overflow-hidden flex flex-col justify-center min-h-0">
                    <div class="absolute top-0 right-0 w-full h-0.5 bg-gradient-to-r from-turquoise to-transparent">
                    </div>
                    <div class="text-[12px] sm:text-[13px] md:text-[16px] text-turquoise mb-0.5 font-bold">ğŸ‘ Ø§Ù„Ø£ÙƒØ«Ø±
                        ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</div>
                    <div class="text-[9px] sm:text-[10px] md:text-xs font-black text-white truncate px-0.5"
                        id="topRatedName" style="font-size: clamp(0.5625rem, 1.4vw, 0.75rem);">-</div>
                    <div class="text-[12px] sm:text-[13px] md:text-[16px] text-gray-400 mt-0 number-display"
                        id="topRatedValue">0</div>
                </div>
                <div
                    class="stats-card glass rounded-md sm:rounded-lg md:rounded-xl p-1 sm:p-1.5 md:p-2 text-center relative overflow-hidden flex flex-col justify-center min-h-0">
                    <div class="absolute top-0 right-0 w-full h-0.5 bg-gradient-to-r from-turquoise to-transparent">
                    </div>
                    <div class="text-[12px] sm:text-[13px] md:text-[16px] text-turquoise mb-0.5 font-bold">ğŸ“… Ø§Ù„Ø£ÙƒØ«Ø±
                        Ø­Ø¬ÙˆØ²Ø§Øª</div>
                    <div class="text-[9px] sm:text-[10px] md:text-xs font-black text-white truncate px-0.5"
                        id="topBookerName" style="font-size: clamp(0.5625rem, 1.4vw, 0.75rem);">-</div>
                    <div class="text-[12px] sm:text-[13px] md:text-[16px] text-gray-400 mt-0 number-display"
                        id="topBookerValue">0</div>
                </div>
            </div>


            <!-- Branch Filters -->
            <div id="branchFilters"
                class="flex flex-wrap gap-1.5 sm:gap-2 p-1.5 sm:p-2 bg-white/5 rounded-lg sm:rounded-xl w-full sm:w-fit mx-auto no-print animate-in justify-center"
                style="animation-delay: 0.4s;">
            </div>

            <!-- Table Container -->
            <div class="glass rounded-xl sm:rounded-2xl md:rounded-[30px] overflow-hidden neon-glow animate-in"
                style="animation-delay: 0.5s;">
                <div class="table-scroll-container">
                    <table id="targetTable" class="w-full text-right">
                        <thead class="table-head-theme text-sm text-turquoise font-black uppercase tracking-wider">
                            <!-- ØµÙ Ø§Ù„ØªØ¬Ù…ÙŠØ¹ (Ù…Ø«Ù„ ØµÙØ­Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„): ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ -->
                            <tr id="breakdownGroupRow" class="breakdown-group-row" style="display:none;"></tr>
                            <tr class="main-header-row">
                                <th class="checkbox-col no-print text-right">
                                    <input type="checkbox" id="selectAll" name="selectAll" onclick="toggleAll(this)"
                                        class="cursor-pointer accent-turquoise checkbox-custom" aria-label="ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„">
                                </th>
                                <th class="col-m text-right">Ù…</th>
                                <th class="col-name text-center cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    data-sort-key="name" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆØ¸Ù">Ø§Ù„Ù…ÙˆØ¸Ù</th>
                                <th class="col-count col-count-single text-center cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    data-sort-key="count" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª">Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</th>
                                <!-- Breakdown: Ù‚Ø³Ù… Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª â€” Ø­Ø¯ ÙØ§ØµÙ„ Ø¨ÙŠÙ† Ø§Ù„Ù…ÙˆØ¸Ù ÙˆØ§Ù„Ø¹Ù‚ÙˆØ¯ (Ø¹Ù„Ù‰ ÙŠÙ…ÙŠÙ† Ø§Ù„Ø¹Ù‚ÙˆØ¯ ÙÙŠ RTL) -->
                                <th class="col-breakdown th-section-end text-center text-cyan-300 text-sm font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    style="display:none;" data-sort-key="staffCount" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù‚ÙˆØ¯">Ø§Ù„Ø¹Ù‚ÙˆØ¯</th>
                                <th class="col-breakdown text-center text-emerald-300 text-sm font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    style="display:none;" data-sort-key="reception" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„">Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</th>
                                <th class="col-breakdown th-section-start text-center text-orange-300 text-sm font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    style="display:none;" data-sort-key="booking" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø¨ÙˆÙƒÙŠÙ†Ø¬">Ø¨ÙˆÙƒÙŠÙ†Ø¬</th>
                                <!-- Ù‚Ø³Ù… Ø§Ù„Ø´ÙØªØ§Øª â€” border-left Ø¹Ù„Ù‰ Ø¢Ø®Ø± Ø¹Ù…ÙˆØ¯ (Ù„ÙŠÙ„ = Ø£ÙŠØ³Ø± Ø¨ØµØ±ÙŠØ§Ù‹) -->
                                <th class="col-breakdown text-center text-amber-300 text-sm font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    style="display:none;" data-sort-key="morning" title="ÙØ±Ø² Ø­Ø³Ø¨ ØµØ¨Ø§Ø­">ØµØ¨Ø§Ø­</th>
                                <th class="col-breakdown text-center text-indigo-300 text-sm font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    style="display:none;" data-sort-key="evening" title="ÙØ±Ø² Ø­Ø³Ø¨ Ù…Ø³Ø§Ø¡">Ù…Ø³Ø§Ø¡</th>
                                <th class="col-breakdown th-section-start text-center text-gray-300 text-sm font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    style="display:none;" data-sort-key="night" title="ÙØ±Ø² Ø­Ø³Ø¨ Ù„ÙŠÙ„">Ù„ÙŠÙ„</th>
                                <!-- VIP: ÙŠÙØ­Ù‚Ù† Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ Ù…Ø¹ class th-section-start Ù„Ø£ÙˆÙ„ Ø¹Ù…ÙˆØ¯ -->
                                <th class="col-breakdown col-breakdown-vip-placeholder text-center text-amber-300 text-sm font-semibold"
                                    style="display:none;" id="vipColumnsPlaceholder"></th>
                                <!-- Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© â€” Ù‚Ø³Ù… Ù…Ø³ØªÙ‚Ù„: Ø­Ø¯ ÙŠØ³Ø§Ø± (Ø¨Ø¹Ø¯ VIP) + Ø­Ø¯ ÙŠÙ…ÙŠÙ† (Ù‚Ø¨Ù„ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª) -->
                                <th class="col-breakdown col-monthly-contracts th-section-start th-section-end text-center text-teal-300 text-sm font-semibold"
                                    style="display:none;" title="Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© â€” ÙƒÙ„ Ø¹Ù‚Ø¯ ÙŠØ¶ÙŠÙ 200 Ø±ÙŠØ§Ù„">Ø§Ù„Ø¹Ù‚ÙˆØ¯
                                    Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</th>
                                <!-- Ù‚Ø³Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª â€” Ø­Ø¯ ÙŠØ³Ø§Ø± (Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù‚ÙˆØ¯) + Ø­Ø¯ ÙŠÙ…ÙŠÙ† (Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±) -->
                                <th class="col-breakdown th-section-start text-center text-red-300 text-sm font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    style="display:none;" data-sort-key="alertCount" title="ÙØ±Ø² Ø­Ø³Ø¨ ØªÙ†Ø¨ÙŠÙ‡">ØªÙ†Ø¨ÙŠÙ‡</th>
                                <th class="col-breakdown th-section-end text-center text-red-300 text-sm font-semibold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    style="display:none;" data-sort-key="alertTotal" title="ÙØ±Ø² Ø­Ø³Ø¨ Ù†Ù‚Øµ SAR">Ù†Ù‚Øµ SAR
                                </th>
                                <!-- Ù‚Ø³Ù… Ø§Ù„Ø­Ø¶ÙˆØ± â€” Ø­Ø¯ ÙŠØ³Ø§Ø± (Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª) + Ø­Ø¯ ÙŠÙ…ÙŠÙ† (Ù‚Ø¨Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª) -->
                                <th class="col-attendance th-section-start th-section-end text-center cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    data-sort-key="attendance26Days" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø¨Ø·Ù„ ØªØ­Ø¯ÙŠ Ø§Ù„Ø¸Ø±ÙˆÙ"><span
                                        class="block text-xs">Ø¨Ø·Ù„ ØªØ­Ø¯ÙŠ Ø§Ù„Ø¸Ø±ÙˆÙ</span><span
                                        class="text-[12px] font-normal text-gray-400">(26+ ÙŠÙˆÙ…)</span></th>
                                <th class="col-rate text-center">Ø§Ù„ÙØ¦Ø©</th>
                                <th class="col-eval-booking text-center text-turquoise cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    data-sort-key="evaluationsBooking" title="ÙØ±Ø² Ø­Ø³Ø¨ BOOKING">
                                    <div class="flex flex-col items-center justify-center gap-0">
                                        <span class="text-[13px] font-bold">BOOKING</span>
                                        <span id="header-eval-booking-rate" class="text-[13px] text-gray-400">20
                                            Ø±.Ø³</span>
                                    </div>
                                </th>
                                <th class="col-eval-google text-center text-green-400 cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    data-sort-key="evaluationsGoogle" title="ÙØ±Ø² Ø­Ø³Ø¨ GOOGLE">
                                    <div class="flex flex-col items-center justify-center gap-0">
                                        <span class="text-[13px] font-bold">GOOGLE</span>
                                        <span id="header-eval-google-rate" class="text-[13px] text-gray-400">10
                                            Ø±.Ø³</span>
                                    </div>
                                </th>
                                <th class="col-net text-center th-section-start bg-turquoise/10 text-white font-bold cursor-pointer hover:bg-white/10 transition-colors select-none"
                                    data-sort-key="net" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„ØµØ§ÙÙŠ">Ø§Ù„ØµØ§ÙÙŠ</th>
                            </tr>
                            <tr id="negativeRatingsHeaderRow" class="negative-ratings-header-row no-print">
                                <td colspan="100" class="negative-ratings-row-cell">
                                    <div class="negative-ratings-row-inner">
                                        <span class="negative-ratings-label-cell">ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø³Ù„Ø¨ÙŠØ© (Ø£Ù‚Ù„ Ù…Ù† ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ÙÙ†Ø¯Ù‚) +
                                            ÙÙ‚Ø¯Ø§Ù† ÙØ±Øµ Ø­Ø¬Ø² Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„ØªÙŠ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§</span>
                                        <div id="negativeRatingsCell" class="negative-ratings-data-cell"></div>
                                    </div>
                                </td>
                            </tr>
                        </thead>
                        <tbody id="mainTable" class="divide-y divide-white/10"></tbody>
                        <tfoot class="bg-white/[0.06] font-black border-t-2 border-white/20">
                            <!-- ØµÙ Ø§Ù„Ø­ÙˆØ§ÙØ²: Ø­Ø§ÙØ² Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… ÙˆØ§Ù„Ø§Ù†Ø¬Ø§Ø² | Ø®Ø¨ÙŠØ± Ø¥Ø±Ø¶Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„ÙØ±Ø¹ -->
                            <tr id="bonusesCombinedRow" class="footer-row text-white border-b border-white/10"
                                style="display: none;">
                                <td colspan="100" class="px-2 py-1 text-right align-top">
                                    <div class="flex flex-col sm:flex-row gap-1.5 flex-wrap bonuses-compact"
                                        style="direction: rtl;">
                                        <div id="commitmentBonusBlock"
                                            class="flex-1 min-w-0 rounded px-1.5 py-1 bg-white/[0.03] border border-turquoise/20">
                                            <div class="flex items-center gap-1.5 flex-wrap">
                                                <span class="text-turquoise font-semibold text-[9px] shrink-0">Ø­Ø§ÙØ²
                                                    Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…</span>
                                                <span id="commitmentBonusValue"
                                                    class="text-turquoise font-bold text-[9px] number-display"></span>
                                            </div>
                                            <p class="text-[8px] text-white/50 mt-0.5 leading-tight"
                                                title="Ù…Ù† Ø£ØªÙ… 26 ÙŠÙˆÙ… Ø¯ÙˆØ§Ù… ÙˆØªÙ…ÙŠØ² Ø¨Ø­Ø¬ÙˆØ²Ø§Øª Ø£Ùˆ ØªÙ‚ÙŠÙŠÙ…">Ù…Ù† Ø£ØªÙ… 26 ÙŠÙˆÙ… ÙˆØªÙ…ÙŠØ²
                                                Ø¨Ø­Ø¬ÙˆØ²Ø§Øª Ø£Ùˆ ØªÙ‚ÙŠÙŠÙ…</p>
                                            <div id="commitmentBonusText" class="text-[10.5px] leading-tight mt-0.5"
                                                style="direction: rtl;"></div>
                                        </div>
                                        <div id="excellenceBonusBlock"
                                            class="flex-1 min-w-0 rounded px-1.5 py-1 bg-white/[0.03] border border-turquoise/20">
                                            <div class="flex items-center gap-1.5 flex-wrap">
                                                <span class="text-turquoise font-semibold text-[9px] shrink-0">Ø®Ø¨ÙŠØ±
                                                    Ø¥Ø±Ø¶Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„</span>
                                                <span id="excellenceBonusValue"
                                                    class="text-turquoise font-bold text-[9px] number-display"></span>
                                            </div>
                                            <p class="text-[8px] text-white/50 mt-0.5 leading-tight"
                                                title="Ø§Ù„Ø£ÙƒØ«Ø± ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹ ÙˆØ§Ù„Ø£ÙƒØ«Ø± Ø­Ø¬ÙˆØ²Ø§Øª ÙÙŠ Ø§Ù„ÙØ±Ø¹">Ø§Ù„Ø£ÙƒØ«Ø± ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹ ÙˆØ§Ù„Ø£ÙƒØ«Ø±
                                                Ø­Ø¬ÙˆØ²Ø§Øª ÙÙŠ Ø§Ù„ÙØ±Ø¹</p>
                                            <div id="excellenceBonusText" class="text-[10.5px] leading-tight mt-0.5"
                                                style="direction: rtl;"></div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <!-- Counts Row - Hidden -->
                            <tr class="footer-row text-white border-b border-white/10" style="display: none;">
                                <td class="checkbox-col no-print p-2"></td>
                                <td class="col-m p-2"></td>
                                <td class="col-name p-2 text-right text-sm font-black text-gray-400">
                                    Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø§Ù„Ø¹Ø¯Ø¯)
                                </td>
                                <td id="footBookingCount"
                                    class="col-count col-count-single p-2 text-center font-mono text-sm text-white/70 number-display font-semibold">
                                    0</td>
                                <!-- Breakdown footer totals (hidden by default) -->
                                <td id="footStaffCount"
                                    class="col-breakdown p-1 text-center font-mono text-sm text-cyan-300 font-semibold"
                                    style="display:none">0</td>
                                <td id="footReception"
                                    class="col-breakdown p-1 text-center font-mono text-sm text-emerald-300 font-medium"
                                    style="display:none">0</td>
                                <td id="footBooking"
                                    class="col-breakdown p-1 text-center font-mono text-sm text-orange-300 font-medium"
                                    style="display:none">0</td>
                                <td id="footMorning"
                                    class="col-breakdown p-1 text-center font-mono text-sm text-amber-300 font-medium"
                                    style="display:none">0</td>
                                <td id="footEvening"
                                    class="col-breakdown p-1 text-center font-mono text-sm text-indigo-300 font-medium"
                                    style="display:none">0</td>
                                <td id="footNight"
                                    class="col-breakdown p-1 text-center font-mono text-sm text-gray-300 font-medium"
                                    style="display:none">0</td>
                                <td id="footVipRooms"
                                    class="col-breakdown p-1 text-center font-mono text-sm text-amber-300 font-semibold"
                                    style="display:none" colspan="1">0</td>
                                <td id="footMonthlyContracts"
                                    class="col-breakdown col-monthly-contracts td-section-start td-section-end p-1 text-center font-mono text-sm text-teal-300 font-medium"
                                    style="display:none">0</td>
                                <td id="footAlertCount"
                                    class="col-breakdown td-section-start p-1 text-center font-mono text-sm text-red-300 font-medium"
                                    style="display:none">0</td>
                                <td id="footAlertTotal"
                                    class="col-breakdown td-section-end p-1 text-center font-mono text-sm text-red-300 font-medium"
                                    style="display:none">0</td>
                                <td class="col-attendance td-section-start td-section-end p-2"></td>
                                <td class="col-rate p-2"></td>
                                <td id="footEvalCount"
                                    class="p-2 text-center text-yellow-400 text-base border-x border-white/10 number-display font-black">
                                    0</td>
                                <td class="col-fund p-2 text-center text-gray-500 text-base border-x border-white/10">-
                                </td>
                                <td class="col-net p-2 text-left px-8 text-gray-500">-</td>
                            </tr>
                            <!-- Bookings Only Value Row - Hidden -->
                            <tr class="footer-row text-white border-b border-white/10" style="display: none;">
                                <td class="checkbox-col no-print p-2"></td>
                                <td class="col-m p-2"></td>
                                <td class="col-name p-2 text-right text-sm font-black text-gray-400">
                                    ØµØ§ÙÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª (Ø¨Ø¯ÙˆÙ† ØªÙ‚ÙŠÙŠÙ…)
                                </td>
                                <td class="col-count p-2"></td>
                                <td class="col-attendance p-2"></td>
                                <td class="col-rate p-2"></td>
                                <td class="p-2 border-x border-white/10"></td>
                                <td class="col-fund p-2 border-x border-white/10"></td>
                                <td id="footNetNoEval"
                                    class="col-net p-2 text-left px-8 text-gray-400 number-display font-bold">-</td>
                            </tr>
                            <!-- Values Row - Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø¹Ù…Ø§Ù„ + Ù…ÙˆØ¸ÙÙŠÙ†) -->
                            <tr id="footerRowTotal" class="footer-row footer-summary text-white">
                                <td id="footerTotalLabel" colspan="6" class="footer-summary-label p-2 text-right"
                                    style="direction:rtl">
                                    <span class="text-gray-300 text-xs font-bold tracking-wide">Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
                                    <span class="text-white/30 text-[9px] mr-1">(Ø¹Ù…Ø§Ù„ + Ù…ÙˆØ¸ÙÙŠÙ†)</span>
                                </td>
                                <td id="footFund"
                                    class="footer-summary-val p-2 text-center text-orange-400 font-bold text-xs number-display">
                                    0</td>
                                <td id="footNet"
                                    class="footer-summary-val footer-summary-net col-net p-2 text-center text-turquoise font-black text-sm number-display total-val-net">
                                    0</td>
                            </tr>
                            <!-- Total Team Row - Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„ÙƒÙ„ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ -->
                            <tr id="footerRowFinalTotal"
                                class="footer-row footer-summary footer-summary-final text-white">
                                <td id="footerFinalLabel" colspan="6" class="footer-summary-label p-2 text-right"
                                    style="direction:rtl">
                                    <span class="text-turquoise text-xs font-bold tracking-wide">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„ÙƒÙ„ ÙØ±ÙŠÙ‚
                                        Ø§Ù„Ø¹Ù…Ù„</span>
                                </td>
                                <td id="footTotalFund"
                                    class="footer-summary-val p-2 text-center text-orange-400 font-bold text-xs number-display"
                                    style="display: none;">0</td>
                                <td id="footTotalNet"
                                    class="footer-summary-val footer-summary-net col-net p-2 text-center text-turquoise font-black text-sm number-display total-val-net"
                                    colspan="2">0</td>
                            </tr>
                        </tfoot>
                    </table>

                    <!-- Print Conditions Section - Only visible when printing, populated dynamically -->
                    <div class="print-conditions" style="display: none;">
                        <div id="printConditionsInlineContent"
                            style="margin-top: 30px; padding: 15px; border-top: 3px solid #000; background: #fff;">
                            <!-- Populated by populatePrintConditionsInline() -->
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Reports Page -->
        <div id="reportsPage" class="hidden space-y-4 sm:space-y-6 relative w-full overflow-x-hidden"
            style="z-index: 1;">
            <div class="glass p-4 sm:p-6 rounded-xl sm:rounded-2xl border border-turquoise/30 w-full min-w-0">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 sm:mb-6">
                    <h2 class="text-xl sm:text-2xl font-black text-turquoise flex items-center gap-2"
                        style="font-size: clamp(1.125rem, 4vw, 1.5rem);">
                        <span>ğŸ“Š</span>
                        <span>ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
                    </h2>
                    <div class="flex items-center gap-4">
                        <button onclick="printAllEmployeeReports()"
                            class="btn-modern px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 bg-white/[0.07] text-[#14b8a6] rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border border-white/20 flex items-center gap-2 hover:bg-[#14b8a6]/15 hover:border-[#14b8a6]/40 hover:text-white transition-all backdrop-blur-sm"
                            style="font-size: clamp(0.75rem, 2vw, 0.875rem);">
                            <span class="text-base sm:text-lg">ğŸ–¨ï¸</span>
                            <span class="action-btn-label-long hidden sm:inline">Ø·Ø¨Ø§Ø¹Ø© ÙƒÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span>
                            <span class="action-btn-label-short sm:hidden">ÙƒÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span>
                        </button>
                        <button onclick="showEmployeeCodesModal()"
                            class="btn-modern px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 bg-gradient-to-r from-[var(--adora-accent)] to-teal-700 text-white rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border border-[var(--adora-accent)]/30 flex items-center gap-2 hover:shadow-lg hover:brightness-110 transition-all backdrop-blur-sm"
                            style="font-size: clamp(0.75rem, 2vw, 0.875rem);" aria-label="Ø¹Ø±Ø¶ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†">
                            <span class="text-base sm:text-lg">ğŸ”‘</span>
                            <span class="action-btn-label-long hidden sm:inline">Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</span>
                            <span class="action-btn-label-short sm:hidden">ÙƒÙˆØ¯</span>
                        </button>
                        <button onclick="hideReportsPage()"
                            class="btn-modern px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 bg-white/10 text-gray-200 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border border-white/20 flex items-center gap-2 hover:bg-white/15 hover:border-gray-300/50 hover:text-white transition-all backdrop-blur-sm"
                            style="font-size: clamp(0.75rem, 2vw, 0.875rem);">
                            <span class="text-base sm:text-lg">â†</span>
                            <span class="action-btn-label-long hidden sm:inline">Ø±Ø¬ÙˆØ¹</span>
                            <span class="action-btn-label-short sm:hidden">Ø±Ø¬ÙˆØ¹</span>
                        </button>
                    </div>
                </div>

                <!-- Tabs: ØªÙ…Ø±ÙŠØ± Ø£ÙÙ‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ (ÙŠÙØ®ÙÙ‰ Ù„Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…) -->
                <div id="reportsTabsBar"
                    class="flex gap-1 sm:gap-2 mb-4 sm:mb-6 border-b border-white/10 overflow-x-auto -webkit-overflow-scrolling-touch scrollbar-hide"
                    style="scrollbar-width: none;">
                    <button onclick="switchReportsTab('current')" id="reportsTabCurrent"
                        class="flex-shrink-0 px-3 sm:px-4 py-2 text-xs sm:text-sm font-bold text-turquoise border-b-2 border-turquoise transition-colors min-h-[44px]">
                        Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                    </button>
                    <button onclick="switchReportsTab('archived')" id="reportsTabArchived"
                        class="flex-shrink-0 px-3 sm:px-4 py-2 text-xs sm:text-sm font-bold text-gray-400 border-b-2 border-transparent hover:text-white transition-colors min-h-[44px]">
                        Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…ØºÙ„Ù‚Ø©
                    </button>
                    <button onclick="switchReportsTab('statistics')" id="reportsTabStatistics"
                        class="flex-shrink-0 px-3 sm:px-4 py-2 text-xs sm:text-sm font-bold text-gray-400 border-b-2 border-transparent hover:text-white transition-colors min-h-[44px]">
                        Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                    </button>
                </div>

                <!-- Current Reports Content -->
                <div id="currentReportsContent">
                    <!-- Search and Filter -->
                    <div class="mb-6 space-y-4">
                        <label for="reportsEmployeeSearch" class="sr-only">Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆØ¸Ù</label>
                        <input type="text" id="reportsEmployeeSearch" name="reportsEmployeeSearch"
                            placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆØ¸Ù..."
                            class="w-full px-4 py-3 sm:py-3 rounded-xl text-base sm:text-sm text-white placeholder-gray-300 focus:outline-none min-h-[44px]"
                            style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2);"
                            onfocus="this.style.borderColor='var(--adora-accent)'; this.style.background='rgba(255, 255, 255, 0.15)';"
                            onblur="this.style.borderColor='rgba(255, 255, 255, 0.2)'; this.style.background='rgba(255, 255, 255, 0.1)';"
                            onkeyup="scheduleReportsFilter(this)">

                        <!-- Branch Filter -->
                        <div class="flex flex-wrap gap-2">
                            <button onclick="filterReportsByBranch('Ø§Ù„ÙƒÙ„')"
                                class="filter-reports-pill active px-4 py-2 rounded-lg text-sm font-bold transition-all text-white shadow-[0_0_20px_rgba(13,148,136,0.3)]"
                                data-filter="Ø§Ù„ÙƒÙ„" aria-label="ØªØµÙÙŠØ© Ø§Ù„ÙƒÙ„">
                                Ø§Ù„ÙƒÙ„
                            </button>
                        </div>
                    </div>

                    <!-- Employees Grid -->
                    <div id="reportsEmployeesGrid"
                        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 sm:gap-3 max-h-[70vh] overflow-y-auto">
                        <!-- Employees cards will be populated here -->
                    </div>
                </div>

                <!-- Archived Periods Content -->
                <div id="archivedReportsContent" class="hidden">
                    <div class="mb-4 flex flex-col sm:flex-row sm:items-end gap-3">
                        <div class="flex-1 min-w-0">
                            <label for="archivedPeriodSelect" class="block text-sm font-bold text-gray-300 mb-2">Ø§Ø®ØªØ±
                                Ø§Ù„ÙØªØ±Ø©:</label>
                            <select id="archivedPeriodSelect" name="archivedPeriodSelect"
                                onchange="loadArchivedPeriod(this.value)"
                                class="w-full px-4 py-3 rounded-xl text-base sm:text-sm text-white bg-white/10 border border-white/20 focus:outline-none focus:border-turquoise min-h-[44px]">
                                <option value="">-- Ø§Ø®ØªØ± ÙØªØ±Ø© --</option>
                            </select>
                        </div>
                        <button type="button" id="clearArchivedPeriodsBtn"
                            onclick="if(typeof confirmAndClearArchivedPeriods==='function') confirmAndClearArchivedPeriods();"
                            class="flex-shrink-0 px-4 py-3 rounded-xl text-sm font-bold text-amber-200 bg-amber-500/20 border border-amber-500/40 hover:bg-amber-500/30 transition-colors min-h-[44px]"
                            title="ÙŠÙ…Ø³Ø­: Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…ØºÙ„Ù‚Ø© (Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©) + Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª. Ù„Ø§ ÙŠÙ…Ø³Ø­: Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø£Ø¨Ø¯Ø§Ù‹.">
                            <span>ğŸ—‘ï¸</span>
                            <span>Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„ÙØªØ±Ø§Øª (Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©)</span>
                        </button>
                    </div>
                    <div id="archivedPeriodInfo" class="mb-4 p-4 bg-white/5 rounded-xl border border-white/10 hidden">
                        <p class="text-sm text-gray-300">
                            <span class="font-bold text-turquoise">Ø§Ù„ÙØªØ±Ø©:</span> <span id="archivedPeriodText">-</span>
                        </p>
                        <p class="text-sm text-gray-300 mt-2">
                            <span class="font-bold text-turquoise">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØºÙ„Ø§Ù‚:</span> <span
                                id="archivedClosedAt">-</span>
                        </p>
                        <button type="button" onclick="restoreArchivedPeriodAsCurrent()"
                            class="hidden mt-4 w-full sm:w-auto btn-modern px-4 py-2.5 rounded-xl text-sm font-bold bg-gradient-to-r from-[var(--adora-accent)] to-teal-700 text-white border border-[var(--adora-accent)]/30 flex items-center justify-center gap-2 hover:brightness-110 transition-all"
                            aria-hidden="true" title="Ù…Ø®ÙÙŠ â€” Ù„Ø§ ÙŠÙØ³Ù…Ø­ Ø¨Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…ØºÙ„Ù‚Ø©"
                            aria-label="Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØªØ±Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„">
                            <span>ğŸ”„</span>
                            <span>Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙØªØ±Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„</span>
                        </button>
                    </div>
                    <div id="archivedReportsGrid"
                        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 max-h-[70vh] overflow-y-auto">
                        <!-- Archived employees will be populated here -->
                    </div>
                </div>

                <!-- Statistics Content (Ø´Ù‚ÙŠÙ‚ Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ù…ØºÙ„Ù‚Ø© â€” ÙƒØ§Ù† Ø¯Ø§Ø®Ù„ archived ÙÙƒØ§Ù† ÙŠÙØ®ÙÙ‰ Ù…Ø¹Ù‡Ø§) -->
                <div id="statisticsReportsContent" class="hidden">
                    <!-- Ø¨Ø§Ù†Ø± Ø¹Ø±Ø¶ ÙØªØ±Ø© Ø£Ø±Ø´ÙŠÙ (ÙŠÙØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¹ÙŠÙ† ÙÙŠ ÙØªØ±Ø© Ø³Ø§Ø¨Ù‚Ø©ØŒ ÙˆÙŠÙØ®ÙÙ‰ Ø¹Ù†Ø¯ Ø§Ù„Ø±Ø¬ÙˆØ¹) -->
                    <div id="archivedViewOnlyBanner"
                        class="hidden mb-6 glass p-4 rounded-xl border border-amber-500/40 bg-amber-500/10">
                        <div class="flex flex-wrap items-center justify-between gap-3">
                            <div class="flex items-center gap-2 flex-wrap">
                                <span class="text-lg" aria-hidden="true">ğŸ‘</span>
                                <span class="text-amber-200 font-bold">Ø¹Ø±Ø¶ ÙØªØ±Ø© Ø£Ø±Ø´ÙŠÙ (Ø¹Ø±Ø¶ ÙÙ‚Ø·)</span>
                                <span id="archivedViewOnlyPeriodText" class="text-white font-medium">â€”</span>
                                <span id="archivedViewOnlyClosedAt" class="text-sm text-gray-400">â€”</span>
                            </div>
                            <button type="button" onclick="closeArchivedPeriodView()"
                                class="px-4 py-2 rounded-lg text-sm font-bold bg-white/20 text-white border border-white/30 hover:bg-white/30 transition-colors min-h-[44px] flex items-center gap-2">
                                <span>â†</span>
                                <span>Ø±Ø¬ÙˆØ¹ Ù„Ù„ÙØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
                            </button>
                        </div>
                    </div>
                    <!-- Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ù…Ù† Ø§Ù„Ù†Ù‚Ø§Ø· (ÙŠÙØ®ÙÙ‰ Ù„Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…) -->
                    <div class="mb-8" id="cumulativePointsSection">
                        <button type="button" onclick="toggleCumulativePoints()"
                            class="w-full text-xl font-black text-turquoise mb-2 flex items-center gap-2 cursor-pointer hover:text-white transition-colors group">
                            <span id="cumulativePointsArrow" class="transition-transform duration-300 text-base"
                                style="display:inline-block;">â—€</span>
                            <span>ğŸ’°</span>
                            <span>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ù…Ù† Ø§Ù„Ù†Ù‚Ø§Ø·</span>
                            <span class="text-xs font-normal text-gray-400 group-hover:text-gray-300 mr-2">(Ø§Ø¶ØºØ·
                                Ù„Ù„ØªÙˆØ³ÙŠØ¹)</span>
                        </button>
                        <div id="cumulativePointsBody" style="display:none;">
                            <ul class="text-sm text-gray-300 mb-4 space-y-2 list-disc list-inside">
                                <li><strong>Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰:</strong> Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸Ù Ø¥Ù„Ù‰ 100,000 Ù†Ù‚Ø·Ø© ØªØ±Ø§ÙƒÙ…ÙŠØ©ØŒ ÙŠØ³ØªØ­Ù‚
                                    "Ø¨Ø§ÙƒÙŠØ¬" Ø§Ù„ØªÙ…ÙŠØ²:</li>
                                <li><strong>Ù‚Ø³ÙŠÙ…Ø© Ù…Ø´ØªØ±ÙŠØ§Øª Ø£Ùˆ ØªØ°Ø§ÙƒØ± Ø£Ùˆ Ù‚Ø³Ø§Ø¦Ù…:</strong> Ø¨Ù…Ø§ ÙŠØ¹Ø§Ø¯Ù„ 1,500 Ø±ÙŠØ§Ù„.</li>
                                <li><strong>Ø¥Ù‚Ø§Ù…Ø© ÙØ§Ø®Ø±Ø©:</strong> Ù„ÙŠÙ„Ø© Ù…Ø¬Ø§Ù†ÙŠØ© (Ù„Ù„Ù…ÙˆØ¸Ù Ø£Ùˆ Ù„Ø£Ø­Ø¯ Ø¶ÙŠÙˆÙÙ‡) ØµØ§Ù„Ø­Ø© Ù„Ù…Ø¯Ø© Ø³Ù†Ø©.
                                </li>
                                <li><strong>ÙˆØ¬Ø¨Ø© Ø¹Ø´Ø§Ø¡:</strong> Ø¹Ø´Ø§Ø¡ Ù„ÙØ±Ø¯ÙŠÙ†.</li>
                                <li><strong>Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·:</strong> ØªÙØ­ØªØ³Ø¨ ÙˆØªÙØ¶Ø§Ù Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¯ÙˆØ±ÙŠØ§Ù‹ Ù…Ø¹ ÙƒÙ„ Ø¥ØºÙ„Ø§Ù‚ ÙØªØ±Ø©.
                                </li>
                            </ul>
                            <div class="flex flex-wrap items-center gap-3 mb-4">
                                <button type="button" id="clearCumulativePointsBtn"
                                    onclick="if(typeof confirmAndClearCumulativePoints==='function') confirmAndClearCumulativePoints();"
                                    class="flex-shrink-0 px-4 py-2.5 rounded-xl text-sm font-bold text-amber-200 bg-amber-500/20 border border-amber-500/40 hover:bg-amber-500/30 transition-colors min-h-[40px]"
                                    title="ÙŠÙ…Ø³Ø­ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ù…Ù† Firebase. Ù…Ø¹ Â«Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„ÙØªØ±Ø§ØªÂ» = Ø¨Ø¯Ø§ÙŠØ© ÙƒØ§Ù…Ù„Ø© (Ù…Ø§ ÙŠØ¨Ù‚Ù‰ Ø¥Ù„Ø§ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…ÙØªÙˆØ­Ø©).">
                                    <span>ğŸ—‘ï¸</span>
                                    <span>Ù…Ø³Ø­ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</span>
                                </button>
                            </div>
                            <div id="cumulativePointsCards"
                                class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 mb-6">
                                <!-- ÙƒØ±ÙˆØª Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ ØªÙÙ…Ù„Ø£ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                            </div>
                        </div>
                    </div>
                    <div class="mb-8" id="currentPeriodStatsBlock">
                        <div id="currentPeriodStatsHeaderBlock">
                            <h3 class="text-xl font-black text-turquoise mb-4 flex items-center gap-2">
                                <span>ğŸ“Š</span>
                                <span id="statisticsSectionTitle">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
                            </h3>
                            <div id="currentPeriodStats"
                                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6">
                                <!-- Stats cards will be populated here -->
                            </div>
                        </div>
                        <div class="glass p-4 rounded-xl neon-glow mt-6 relative overflow-visible"
                            id="currentPeriodStatsTableWrap">
                            <h4 class="text-lg font-bold text-white mb-4 flex items-center gap-2 flex-wrap">
                                <span>Ø¬Ø¯ÙˆÙ„ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
                                <button type="button" id="ratingExplanationBtn" onclick="showRatingExplanationModal()"
                                    class="no-print rating-explanation-btn inline-flex items-center justify-center w-10 h-10 rounded-full bg-turquoise/25 border-2 border-turquoise/60 text-turquoise hover:bg-turquoise/40 hover:border-turquoise hover:scale-110 transition-all duration-300 shadow-[0_0_20px_rgba(64,224,208,0.4)]"
                                    title="ÙƒÙŠÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…">
                                    <span class="text-base font-black" aria-hidden="true">â“˜</span>
                                </button>
                                <button type="button" onclick="printCurrentPeriodStats()"
                                    class="no-print inline-flex items-center justify-center w-10 h-10 rounded-lg bg-turquoise/20 border border-turquoise/40 text-turquoise hover:bg-turquoise/30 hover:border-turquoise/60 transition-colors"
                                    title="Ø·Ø¨Ø§Ø¹Ø© Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="6 9 6 2 18 2 18 9" />
                                        <path
                                            d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" />
                                        <rect x="6" y="14" width="12" height="8" />
                                    </svg>
                                </button>
                            </h4>
                            <div class="overflow-x-auto">
                                <table id="employeePerformanceTable" class="w-full text-sm" data-sort-key="points"
                                    data-sort-dir="desc">
                                    <thead>
                                        <tr class="bg-white/10 border-b border-white/20">
                                            <th class="p-3 text-right font-bold text-turquoise cursor-pointer select-none hover:bg-white/10 transition-colors rounded-tl"
                                                data-sort-key="points" title="Ø§Ù„ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·"
                                                onclick="sortEmployeePerformanceTable(this.dataset.sortKey)">
                                                <span>Ø§Ù„ØªØ±ØªÙŠØ¨</span> <span
                                                    class="sort-arrow text-xs opacity-70 mr-1">â–¼</span>
                                            </th>
                                            <th class="p-3 text-right font-bold text-turquoise cursor-pointer select-none hover:bg-white/10 transition-colors"
                                                data-sort-key="name" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù…"
                                                onclick="sortEmployeePerformanceTable(this.dataset.sortKey)"><span>Ø§Ø³Ù…
                                                    Ø§Ù„Ù…ÙˆØ¸Ù</span> <span
                                                    class="sort-arrow text-xs opacity-70 mr-1">â†•</span></th>
                                            <th class="p-3 text-center font-bold text-turquoise cursor-pointer select-none hover:bg-white/10 transition-colors"
                                                data-sort-key="branches" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„ÙØ±Ø¹"
                                                onclick="sortEmployeePerformanceTable(this.dataset.sortKey)">
                                                <span>Ø§Ù„ÙØ±Ø¹</span> <span
                                                    class="sort-arrow text-xs opacity-70 mr-1">â†•</span>
                                            </th>
                                            <th class="p-3 text-center font-bold text-turquoise cursor-pointer select-none hover:bg-white/10 transition-colors"
                                                data-sort-key="count" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª"
                                                onclick="sortEmployeePerformanceTable(this.dataset.sortKey)"><span>Ø¹Ø¯Ø¯
                                                    Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</span> <span
                                                    class="sort-arrow text-xs opacity-70 mr-1">â†•</span></th>
                                            <th class="p-3 text-center font-bold text-turquoise cursor-pointer select-none hover:bg-white/10 transition-colors"
                                                data-sort-key="totalEval" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª"
                                                onclick="sortEmployeePerformanceTable(this.dataset.sortKey)">
                                                <span>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</span> <span
                                                    class="sort-arrow text-xs opacity-70 mr-1">â†•</span>
                                            </th>
                                            <th class="p-3 text-center font-bold text-turquoise cursor-pointer select-none hover:bg-white/10 transition-colors"
                                                data-sort-key="net" title="ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„ØµØ§ÙÙŠ"
                                                onclick="sortEmployeePerformanceTable(this.dataset.sortKey)">
                                                <span>Ø§Ù„ØµØ§ÙÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚</span> <span
                                                    class="sort-arrow text-xs opacity-70 mr-1">â†•</span>
                                            </th>
                                            <th class="p-3 text-center font-bold text-turquoise cursor-pointer select-none hover:bg-white/10 transition-colors rounded-tr"
                                                data-sort-key="points"
                                                title="Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ù† Ø§Ù„ÙØªØ±Ø© (ØµØ§ÙÙŠ + Ù…Ø³Ø§Ù‡Ù…Ø© 15%). Ù„Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³Ù…."
                                                onclick="sortEmployeePerformanceTable(this.dataset.sortKey)">
                                                <span>Ø§Ù„Ù†Ù‚Ø§Ø·</span> <span
                                                    class="sort-arrow text-xs opacity-70 mr-1">â†•</span>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="employeePerformanceTableBody">
                                        <!-- Rows will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 hidden" id="archivedPeriodsSection" aria-hidden="true">
                        <h3 class="text-xl font-black text-turquoise mb-4 flex items-center gap-2">
                            <span>ğŸ“ˆ</span>
                            <span>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</span>
                        </h3>
                        <div id="archivedPeriodsStatsContainer" class="space-y-6">
                            <!-- Each archived period will be displayed here separately -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù…Ø¤Ø´Ø± Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø­ÙŠØ© (ÙŠØ¸Ù‡Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase) -->
        <div id="liveSyncIndicator" class="live-sync-indicator no-print" aria-hidden="true" style="display: none;">
            <span class="live-sync-spinner" aria-hidden="true"></span>
            <span class="live-sync-label">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...</span>
        </div>

        <!-- Developer Signature (Ù…Ø®ÙÙŠ) -->
        <footer class="mt-12 mb-2 text-center" aria-hidden="true" style="display: none !important;">
            <p class="text-[9px] text-gray-400/50 font-extralight tracking-wider no-print">
                ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨ÙˆØ§Ø³Ø·Ø©
                <span class="text-gray-300/60">Ø§ÙŠÙ…Ù† Ø§Ø¨Ùˆ ÙˆØ±Ø¯Ù‡</span>
                <span class="mx-1.5">â€¢</span>
                <span class="text-gray-300/50">0570707121</span>
                <span class="mx-1.5">â€¢</span>
                <span class="text-gray-300/50">7aayy@gmail.com</span>
            </p>
            <!-- Print version - always visible in print -->
            <p class="print-only" style="display: none;">
                ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨ÙˆØ§Ø³Ø·Ø© Ø§ÙŠÙ…Ù† Ø§Ø¨Ùˆ ÙˆØ±Ø¯Ù‡ â€¢ 0570707121 â€¢ 7aayy@gmail.com
            </p>
        </footer>
    </div>

    <!-- Conditions Modal (Moved outside container to fix z-index issue) -->
    <div id="conditionsModal"
        class="fixed inset-0 z-[999] hidden flex items-center justify-center bg-black/60 backdrop-blur-sm p-2 sm:p-4"
        onclick="closeConditionsModal(event)" style="z-index: 999 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto min-w-0"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 1px solid rgba(64, 224, 208, 0.3);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>ğŸ“‹</span>
                    <span>Ø´Ø±ÙˆØ· Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</span>
                </h2>
                <button onclick="closeConditionsModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center">&times;</button>
            </div>
            <!-- Dynamic content populated by populateConditionsModalContent() -->
            <div id="conditionsModalContent" class="space-y-4"></div>
            <div class="mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end">
                <button onclick="printConditions()"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]">
                    <span>ğŸ–¨ï¸</span>
                    <span>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ø±ÙˆØ·</span>
                </button>
                <button onclick="closeConditionsModal()"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ÙƒÙŠÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (ØªØ¸Ù‡Ø± Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙÙ‚Ø·) -->
    <div id="ratingExplanationModal"
        class="fixed inset-0 z-[999] hidden flex items-center justify-center bg-black/60 backdrop-blur-sm p-2 sm:p-4"
        onclick="closeRatingExplanationModal(event)" style="z-index: 999 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto min-w-0"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 1px solid rgba(64, 224, 208, 0.3);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>ğŸ“Š</span>
                    <span>ÙƒÙŠÙÙŠØ© Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</span>
                </h2>
                <button type="button" onclick="closeRatingExplanationModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-white/10">&times;</button>
            </div>
            <div class="space-y-4 text-sm text-gray-300">
                <p class="text-gray-200 font-medium">
                    <strong class="text-turquoise">Ø§Ù„Ù†Ù‚Ø§Ø·</strong> = Ø±ØµÙŠØ¯Ùƒ Ù…Ù† Ø§Ù„ÙØªØ±Ø© (ØµØ§ÙÙŠ + 15%).<br>
                    <strong class="text-turquoise">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯Ø§Ø¡</strong> = Ø­Ø³Ø¨ ØªØ±ØªÙŠØ¨Ùƒ Ø¨ÙŠÙ† Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† (Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø·Ø§Ù‹ =
                    Ù…Ù…ØªØ§Ø²ØŒ Ø§Ù„Ø£Ù‚Ù„ = Ø³ÙŠØ¡).
                </p>

                <div class="bg-turquoise/10 rounded-xl p-4 border border-turquoise/30">
                    <h3 class="text-base font-bold text-turquoise mb-2">ÙƒÙŠÙ ÙŠÙØ­Ø³Ø¨ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯Ø§Ø¡ØŸ</h3>
                    <ul class="space-y-1.5 list-none text-gray-200">
                        <li>ÙŠØªÙ… ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù…Ù† <strong>Ø§Ù„Ø£Ø¹Ù„Ù‰</strong> Ø¥Ù„Ù‰ <strong>Ø§Ù„Ø£Ù‚Ù„</strong> Ø­Ø³Ø¨ Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø§Ø·
                            ÙÙ‚Ø·.</li>
                        <li>Ø£Ø¹Ù„Ù‰ 20% â†’ <strong class="text-green-400">Ù…Ù…ØªØ§Ø²</strong></li>
                        <li>20%â€“40% â†’ <strong class="text-green-300">Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</strong></li>
                        <li>40%â€“60% â†’ <strong class="text-yellow-400">Ø¬ÙŠØ¯</strong></li>
                        <li>60%â€“80% â†’ <strong class="text-orange-400">Ø¶Ø¹ÙŠÙ</strong></li>
                        <li>Ø£Ø¯Ù†Ù‰ 20% â†’ <strong class="text-red-400">Ø³ÙŠØ¡</strong></li>
                    </ul>
                </div>

                <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                    <h3 class="text-base font-bold text-turquoise mb-2">Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª:</h3>
                    <ul class="space-y-1 list-none">
                        <li><strong class="text-green-400">Ù…Ù…ØªØ§Ø²</strong> â€” Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø·Ø§Ù‹</li>
                        <li><strong class="text-green-300">Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</strong></li>
                        <li><strong class="text-yellow-400">Ø¬ÙŠØ¯</strong></li>
                        <li><strong class="text-orange-400">Ø¶Ø¹ÙŠÙ</strong></li>
                        <li><strong class="text-red-400">Ø³ÙŠØ¡</strong> â€” Ø§Ù„Ø£Ù‚Ù„ Ù†Ù‚Ø§Ø·Ø§Ù‹</li>
                    </ul>
                </div>
            </div>
            <div class="mt-4 sm:mt-6 flex justify-end">
                <button type="button" onclick="closeRatingExplanationModal()"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ù„Ø§Ø¦Ø­Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª -->
    <div id="instructionsModal"
        class="fixed inset-0 z-[1001] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4"
        onclick="closeInstructionsModal(event)" style="z-index: 1001 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-3xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-hidden flex flex-col min-w-0"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.98) 0%, rgba(26, 31, 53, 0.98) 100%); border: 1px solid rgba(64, 224, 208, 0.3);">
            <div class="flex items-center justify-between mb-4 flex-shrink-0">
                <h2 class="text-lg sm:text-xl font-black text-turquoise flex items-center gap-2">
                    <span>ğŸ“œ</span>
                    <span>Ù„Ø§Ø¦Ø­Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙˆØ³ÙŠØ§Ø³Ø§Øª Ø¹Ù…Ù„ Ù…ÙˆØ¸ÙÙŠ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</span>
                </h2>
                <button type="button" onclick="closeInstructionsModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-white/10">&times;</button>
            </div>
            <div id="instructionsModalBody"
                class="overflow-y-auto flex-1 pr-1 space-y-4 text-sm text-gray-300 leading-relaxed"
                style="min-height: 0;">
                <!-- ÙŠÙØ¹Ø¨Ù‘Ø£ Ù…Ù† JS -->
            </div>
            <div class="mt-4 flex-shrink-0 pt-3 border-t border-white/10 flex flex-wrap gap-2 justify-end">
                <button type="button" onclick="printInstructionsModal()"
                    class="glass px-4 sm:px-6 py-2.5 rounded-lg text-sm font-bold text-turquoise hover:bg-turquoise/10 border border-turquoise/30 transition-colors min-h-[44px] flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 6 2 18 2 18 9" />
                        <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" />
                        <rect x="6" y="14" width="12" height="8" />
                    </svg>
                    <span>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù„Ø§Ø¦Ø­Ø©</span>
                </button>
                <button type="button" onclick="closeInstructionsModal()"
                    class="glass px-4 sm:px-6 py-2.5 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px] w-full sm:w-auto">
                    Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    </div>

    <!-- Employee Report Modal (Moved outside container to fix z-index issue) -->
    <div id="employeeReportModal" class="fixed inset-0 z-[1000] hidden flex items-center justify-center p-2 sm:p-4"
        onclick="closeEmployeeReportModal(event)"
        style="background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 1000 !important;">
        <div class="rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto min-w-0"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 1) 0%, rgba(26, 31, 53, 1) 100%); border: 2px solid rgba(64, 224, 208, 0.6); box-shadow: 0 25px 70px rgba(0, 0, 0, 0.9), 0 0 50px rgba(64, 224, 208, 0.4);">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>ğŸ“Š</span>
                    <span id="reportEmployeeName">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙˆØ¸Ù</span>
                </h2>
                <button onclick="event.stopPropagation(); closeEmployeeReportModal();"
                    class="text-gray-400 hover:text-white transition-colors text-2xl font-bold">&times;</button>
            </div>
            <div id="employeeReportContent" class="space-y-4">
                <!-- Report content will be populated here -->
            </div>
            <div class="mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end">
                <button onclick="printEmployeeReport()"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]">
                    <span>ğŸ–¨ï¸</span>
                    <span>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</span>
                </button>
                <button onclick="event.stopPropagation(); downloadEmployeeReportPdf();"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]"
                    title="ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙˆØ¸Ù ÙƒÙ…Ù„Ù PDF">
                    <span>ğŸ“¥</span>
                    <span>ØªØ­Ù…ÙŠÙ„ PDF</span>
                </button>
                <button onclick="event.stopPropagation(); shareEmployeeReportViaWhatsApp();"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]"
                    title="ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ PDF Ø«Ù… Ù…Ø´Ø§Ø±ÙƒØ© Ø£Ùˆ ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø¥Ø±Ø³Ø§Ù„Ù‡">
                    <span>ğŸ’¬</span>
                    <span>Ø¥Ø±Ø³Ø§Ù„ PDF Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</span>
                </button>
                <button onclick="event.stopPropagation(); openProgressReportPage();"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-white hover:bg-white/10 transition-colors flex items-center justify-center gap-2 min-h-[44px]">
                    <span>ğŸ“ˆ</span>
                    <span>Ù‚ÙŠØ§Ø³ Ù…Ø³ØªÙˆÙŠ Ø§Ù„ØªÙ‚Ø¯Ù…</span>
                </button>
                <button onclick="event.stopPropagation(); closeEmployeeReportModal();"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    </div>

    <!-- Close Period Modal -->
    <div id="closePeriodModal"
        class="fixed inset-0 z-[1001] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4"
        onclick="closeClosePeriodModal(event)" style="z-index: 1001 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 max-w-md w-full max-h-[95vh] overflow-y-auto min-w-0"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 2px solid rgba(239, 68, 68, 0.5);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-red-400 flex items-center gap-2">
                    <span>ğŸ”’</span>
                    <span>Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙØªØ±Ø©</span>
                </h2>
                <button onclick="closeClosePeriodModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center">&times;</button>
            </div>
            <div class="space-y-4">
                <div class="bg-red-500/10 rounded-xl p-4 border border-red-500/30">
                    <p class="text-sm text-gray-300 mb-2">
                        <span class="font-bold text-red-400">ØªÙ†Ø¨ÙŠÙ‡:</span> Ø³ÙŠØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ£Ø±Ø´ÙØªÙ‡Ø§ ÙÙŠ
                        Firebase Storage.
                    </p>
                    <p class="text-sm text-gray-300">
                        Ø§Ù„ÙØªØ±Ø©: <span id="closePeriodPeriodText" class="text-turquoise font-bold">-</span>
                    </p>
                </div>
                <div class="bg-yellow-500/10 rounded-xl p-4 border border-yellow-500/30">
                    <p class="text-xs text-yellow-300">
                        âš ï¸ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ØŒ Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„ØµÙØ­Ø© Ø§Ù„Ø±ÙØ¹.
                    </p>
                </div>
            </div>
            <div class="mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end">
                <button onclick="confirmClosePeriod()"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold bg-white/[0.07] text-red-300 border border-white/20 hover:bg-red-500/15 hover:border-red-400/40 hover:text-red-200 transition-all flex items-center justify-center gap-2 min-h-[44px]">
                    <span>ğŸ”’</span>
                    <span>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚</span>
                </button>
                <button onclick="closeClosePeriodModal()"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <!-- Employee Codes Modal -->
    <div id="employeeCodesModal"
        class="fixed inset-0 z-[1002] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4"
        onclick="closeEmployeeCodesModal(event)" style="z-index: 1002 !important;">
        <div class="glass rounded-2xl p-4 sm:p-6 md:p-8 max-w-4xl w-full mx-2 sm:mx-4 max-h-[95vh] overflow-y-auto"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 2px solid rgba(64, 224, 208, 0.5);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>ğŸ”‘</span>
                    <span>Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
                </h2>
                <button onclick="closeEmployeeCodesModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center">&times;</button>
            </div>
            <div id="employeeCodesContent" class="space-y-6">
                <!-- Employee Codes Section -->
                <div>
                    <h3 class="text-lg font-bold text-turquoise mb-4 flex items-center gap-2">
                        <span>ğŸ‘¤</span>
                        <span>Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
                    </h3>
                    <div id="employeeCodesList" class="space-y-3">
                        <!-- Employee codes will be populated here -->
                    </div>
                </div>

                <!-- Admin Links Section -->
                <div class="border-t border-white/10 pt-6">
                    <h3 class="text-lg font-bold text-turquoise mb-4 flex items-center gap-2">
                        <span>ğŸ‘¥</span>
                        <span>Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†</span>
                    </h3>
                    <div id="adminLinksList" class="space-y-3">
                        <!-- Admin links will be populated here -->
                    </div>
                </div>
            </div>
            <div class="mt-4 sm:mt-6 flex justify-end">
                <button onclick="closeEmployeeCodesModal()"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Management Modal -->
    <div id="adminManagementModal"
        class="fixed inset-0 z-[1004] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4"
        onclick="closeAdminManagementModal(event)" style="z-index: 1004 !important;">
        <div class="glass rounded-2xl p-4 sm:p-6 md:p-8 max-w-5xl w-full mx-2 sm:mx-4 max-h-[95vh] overflow-y-auto"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.95) 0%, rgba(26, 31, 53, 0.95) 100%); border: 2px solid rgba(64, 224, 208, 0.4);">
            <div class="flex items-center justify-between mb-4 sm:mb-6">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-turquoise flex items-center gap-2">
                    <span>ğŸ‘¥</span>
                    <span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†</span>
                </h2>
                <button onclick="closeAdminManagementModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[44px] min-h-[44px] flex items-center justify-center">&times;</button>
            </div>
            <div id="adminManagementContent" class="space-y-6">
                <!-- Admin management content will be populated here -->
            </div>
            <div class="mt-4 sm:mt-6 flex justify-end">
                <button onclick="closeAdminManagementModal()"
                    class="glass px-4 sm:px-6 py-2.5 sm:py-2 rounded-lg text-sm font-bold text-gray-300 hover:bg-white/10 transition-colors min-h-[44px]">
                    Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    </div>

    <!-- Discounts Modal -->
    <div id="discountsModal"
        class="fixed inset-0 z-[1003] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4"
        onclick="closeDiscountsModal(event)" style="z-index: 1003 !important;">
        <div id="discountsModalContent"
            class="glass rounded-xl sm:rounded-2xl p-4 sm:p-5 max-w-3xl w-full mx-2 sm:mx-4 discounts-modal-pane"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.98) 0%, rgba(26, 31, 53, 0.98) 100%); border: 2px solid rgba(239, 68, 68, 0.4); box-shadow: 0 20px 60px rgba(239, 68, 68, 0.2);">
            <!-- Header (sticky Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±) -->
            <div class="flex items-center justify-between mb-4 pb-3 border-b border-white/10 discounts-modal-header">
                <h2 class="text-lg sm:text-xl font-black text-red-400 flex items-center gap-2">
                    <span class="text-xl">ğŸ’°</span>
                    <span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª</span>
                </h2>
                <button onclick="closeDiscountsModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl font-bold min-w-[36px] min-h-[36px] flex items-center justify-center hover:bg-white/10 rounded-lg"
                    aria-label="Ø¥ØºÙ„Ø§Ù‚">&times;</button>
            </div>

            <div class="discounts-modal-scroll flex flex-col flex-1 min-h-0 overflow-hidden">
                <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø®ØµÙ… â€” ØªÙˆØ²ÙŠØ¹ Ù…Ù†Ø·Ù‚ÙŠ: Ø³Ø·Ø±1 (Ù…Ù† + Ù…Ø§Ø°Ø§ + ÙƒÙ…) Ø³Ø·Ø±2 (Ù…ØªÙ‰ + Ø¥Ø¶Ø§ÙØ©) -->
                <div class="discounts-form-body discounts-form-grid flex-shrink-0">
                    <!-- Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ù…ÙˆØ¸Ù | Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ… | Ù†Ø³Ø¨Ø© % -->
                    <div class="glass p-2 rounded-lg border border-white/10 min-w-0 discounts-form-card">
                        <label class="block text-xs font-bold text-gray-200 mb-0.5 flex items-center gap-1"><span
                                class="text-turquoise">ğŸ‘¤</span> Ø§Ù„Ù…ÙˆØ¸Ù</label>
                        <select id="discountEmployeeSelect" onchange="updateDiscountEmployeeInfo()"
                            class="w-full px-2 py-1.5 rounded-lg text-xs text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[#14b8a6] focus:ring-1 focus:ring-[#14b8a6]/30 min-h-[34px]">
                            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¸Ù --</option>
                        </select>
                        <p class="text-[9px] text-gray-500 mt-0.5 leading-tight">ÙƒÙ„ Ø§Ù„ÙØ±ÙˆØ¹ (Ù…Ø«Ù„ "Ø§Ù„ÙƒÙ„")</p>
                    </div>
                    <div class="glass p-2 rounded-lg border border-white/10 discount-type-cell min-w-0 discounts-form-card"
                        style="position: relative; z-index: 30;">
                        <label class="block text-xs font-bold text-gray-200 mb-0.5 flex items-center gap-1"><span
                                class="text-red-400">ğŸ·ï¸</span> Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…</label>
                        <div class="flex gap-1.5 items-stretch">
                            <select id="discountTypeSelect"
                                class="discount-type-select-list flex-1 min-w-0 px-2 py-1.5 rounded-lg text-xs text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[#14b8a6] focus:ring-1 focus:ring-[#14b8a6]/30 min-h-[34px] cursor-pointer"
                                style="position: relative; z-index: 30;" aria-label="Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…">
                                <option value="">-- Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ… --</option>
                            </select>
                            <button type="button" onclick="showManageDiscountTypesModal()"
                                class="btn-modern flex-shrink-0 px-2 py-1.5 bg-white/10 text-gray-200 rounded-lg text-xs font-bold border border-white/20 hover:bg-white/15 hover:border-turquoise/40 min-h-[34px] min-w-[34px] flex items-center justify-center"
                                title="Ø¥Ø¯Ø§Ø±Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª" style="z-index: 35 !important;">âš™ï¸</button>
                        </div>
                        <p class="text-[9px] text-gray-500 mt-0.5 leading-tight opacity-0 select-none"
                            aria-hidden="true">ÙƒÙ„ Ø§Ù„ÙØ±ÙˆØ¹</p>
                    </div>
                    <div class="glass p-2 rounded-lg border border-white/10 min-w-0 discount-pct-cell discounts-form-card"
                        style="position: relative; z-index: 1;">
                        <label for="discountPercentageInput"
                            class="block text-xs font-bold text-gray-200 mb-0.5 flex items-center gap-1"><span
                                class="text-red-400">ğŸ“Š</span> Ù†Ø³Ø¨Ø© %</label>
                        <input type="number" id="discountPercentageInput" name="discountPercentageInput" min="1"
                            max="100" step="0.1" placeholder="5"
                            class="w-full px-2 py-1.5 rounded-lg text-xs text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[var(--adora-accent)] focus:ring-1 focus:ring-[var(--adora-accent)]/30 min-h-[34px]">
                        <p class="text-[9px] text-gray-500 mt-0.5">1â€“100%</p>
                    </div>
                    <!-- Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ: ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¯Ø« (ÙˆØ§Ø³Ø¹) | Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
                    <div
                        class="glass p-2 rounded-lg border border-white/10 min-w-0 discounts-date-cell discounts-form-card">
                        <label for="discountEventDateInput"
                            class="block text-xs font-bold text-gray-200 mb-0.5 flex items-center gap-1"><span
                                class="text-red-400">ğŸ“…</span> ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¯Ø«</label>
                        <input type="date" id="discountEventDateInput" name="discountEventDateInput"
                            class="w-full px-2 py-1.5 rounded-lg text-xs text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[var(--adora-accent)] focus:ring-1 focus:ring-[var(--adora-accent)]/30 min-h-[34px]"
                            title="ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚ØµÙŠØ± Ø£Ùˆ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ©">
                    </div>
                    <div class="flex items-center justify-center min-w-0 discounts-add-cell">
                        <button type="button" onclick="addDiscount()"
                            class="btn-modern w-full px-3 py-2 bg-white/[0.07] text-[var(--adora-accent)] rounded-lg text-xs font-bold border border-white/20 hover:bg-[var(--adora-accent)]/15 hover:border-[var(--adora-accent)]/40 hover:text-white min-h-[34px] flex items-center justify-center gap-1.5"
                            aria-label="Ø¥Ø¶Ø§ÙØ© Ø®ØµÙ…">
                            <span>â•</span>
                            <span>Ø¥Ø¶Ø§ÙØ© Ø®ØµÙ…</span>
                        </button>
                    </div>
                </div>
                <div id="selectedEmployeeInfo"
                    class="hidden glass p-2 rounded-lg border border-turquoise/30 bg-gradient-to-r from-turquoise/10 to-transparent mt-2 flex-shrink-0">
                    <div class="flex flex-wrap justify-between items-center gap-1 text-xs text-gray-200">
                        <p><span class="font-bold text-turquoise">Ø§Ù„Ù…ÙˆØ¸Ù:</span> <span id="selectedEmployeeName"
                                class="text-white font-semibold">-</span></p>
                        <p><span class="font-bold text-turquoise">Ø§Ù„ØµØ§ÙÙŠ Ø§Ù„Ù…Ø¬Ù…Ø¹:</span> <span id="selectedEmployeeNet"
                                class="text-white font-bold">-</span> <span class="text-gray-400">Ø±ÙŠØ§Ù„</span></p>
                    </div>
                </div>

                <!-- Discounts List â€” Ù…Ù†Ø·Ù‚Ø© Ø°Ø§Øª ØªÙ…Ø±ÙŠØ± Ø¯Ø§Ø®Ù„ÙŠ ÙÙ‚Ø· -->
                <div
                    class="discounts-list-section mt-4 pt-4 border-t border-white/10 min-w-0 flex flex-col flex-1 min-h-0 overflow-hidden">
                    <h3 class="text-sm font-bold text-white mb-2 flex items-center gap-2 flex-shrink-0">
                        <span class="text-red-400">ğŸ“‹</span>
                        <span>Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©</span>
                    </h3>
                    <div id="discountsList"
                        class="discounts-list-inner space-y-2 overflow-y-auto overflow-x-hidden flex-1 min-h-0 pr-1">
                        <!-- Discounts will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø¹Ø±Ø¶ Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª ÙˆØªÙˆØ§Ø±ÙŠØ®Ù‡Ø§ ÙˆÙ‚ÙŠÙ…Ù‡Ø§ (Ù…Ù† ÙƒØ§Ø±Øª Ø£ÙƒØ«Ø± Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø®ØµÙˆÙ…Ø§Øª) -->
    <div id="mostDiscountsDetailModal"
        class="fixed inset-0 z-[1005] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm"
        onclick="closeMostDiscountsDetailModal(event)" style="z-index: 1005 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-6 max-w-2xl w-full mx-2 sm:mx-4 max-h-[85vh] overflow-y-auto"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.98) 0%, rgba(26, 31, 53, 0.98) 100%); border: 2px solid rgba(239, 68, 68, 0.4);">
            <div class="flex items-center justify-between mb-4 pb-3 border-b border-white/10">
                <h2 class="text-lg sm:text-xl font-black text-red-400 flex items-center gap-2">
                    <span>ğŸ’°</span>
                    <span id="mostDiscountsDetailTitle">Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª ÙˆØªÙˆØ§Ø±ÙŠØ®Ù‡Ø§ ÙˆÙ‚ÙŠÙ…Ù‡Ø§</span>
                </h2>
                <button type="button" onclick="closeMostDiscountsDetailModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl font-bold min-w-[36px] min-h-[36px] flex items-center justify-center hover:bg-white/10 rounded-lg">&times;</button>
            </div>
            <div id="mostDiscountsDetailBody" class="space-y-3 text-sm text-gray-200">
                <!-- ÙŠÙØ¹Ø¨Ù‘Ø£ Ø¨ÙˆØ§Ø³Ø·Ø© showMostDiscountsDetail -->
            </div>
        </div>
    </div>

    <!-- Manage Discount Types Modal -->
    <div id="manageDiscountTypesModal"
        class="fixed inset-0 z-[1004] hidden flex items-center justify-center bg-black/70 backdrop-blur-sm p-2 sm:p-4"
        onclick="closeManageDiscountTypesModal(event)" style="z-index: 1004 !important;">
        <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 max-w-2xl w-full mx-2 sm:mx-4 max-h-[90vh] overflow-y-auto"
            onclick="event.stopPropagation()"
            style="background: linear-gradient(135deg, rgba(15, 23, 41, 0.98) 0%, rgba(26, 31, 53, 0.98) 100%); border: 2px solid rgba(239, 68, 68, 0.4); box-shadow: 0 20px 60px rgba(239, 68, 68, 0.2);">
            <!-- Header -->
            <div class="flex items-center justify-between mb-4 sm:mb-5 pb-3 border-b border-white/10">
                <h2 class="text-lg sm:text-xl md:text-2xl font-black text-red-400 flex items-center gap-2">
                    <span class="text-xl sm:text-2xl">âš™ï¸</span>
                    <span>Ø¥Ø¯Ø§Ø±Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª</span>
                </h2>
                <button onclick="closeManageDiscountTypesModal()"
                    class="text-gray-400 hover:text-white transition-colors text-2xl sm:text-3xl font-bold min-w-[40px] min-h-[40px] flex items-center justify-center hover:bg-white/10 rounded-lg">&times;</button>
            </div>

            <!-- Add New Type -->
            <div class="mb-5 glass p-3 sm:p-4 rounded-lg border border-white/10">
                <label for="newDiscountTypeInput"
                    class="block text-xs sm:text-sm font-bold text-gray-200 mb-2 flex items-center gap-2">
                    <span class="text-turquoise">â•</span>
                    <span>Ø¥Ø¶Ø§ÙØ© Ù†ÙˆØ¹ Ø®ØµÙ… Ø¬Ø¯ÙŠØ¯:</span>
                </label>
                <div class="flex gap-2">
                    <input type="text" id="newDiscountTypeInput" name="newDiscountTypeInput"
                        placeholder="Ø£Ø¯Ø®Ù„ Ù†ÙˆØ¹ Ø®ØµÙ… Ø¬Ø¯ÙŠØ¯..."
                        class="flex-1 px-3 py-2.5 rounded-lg text-sm text-white bg-white/10 border border-white/20 focus:outline-none focus:border-[var(--adora-accent)] focus:ring-2 focus:ring-[var(--adora-accent)]/30 transition-all min-h-[40px]">
                    <button onclick="addDiscountType()"
                        class="btn-modern px-4 py-2.5 bg-white/[0.07] text-[var(--adora-accent)] rounded-lg text-xs sm:text-sm font-bold border border-white/20 hover:bg-[var(--adora-accent)]/15 hover:border-[var(--adora-accent)]/40 hover:text-white transition-all backdrop-blur-sm min-h-[40px] flex items-center justify-center gap-2"
                        aria-label="Ø¥Ø¶Ø§ÙØ© Ù†ÙˆØ¹ Ø®ØµÙ…">
                        <span>â•</span>
                        <span class="action-btn-label-long hidden sm:inline">Ø¥Ø¶Ø§ÙØ©</span>
                    </button>
                </div>
            </div>

            <!-- Types List -->
            <div class="mb-5">
                <h3 class="text-base sm:text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <span class="text-red-400">ğŸ“‹</span>
                    <span>Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:</span>
                </h3>
                <div id="discountTypesList" class="space-y-2 max-h-[300px] overflow-y-auto pr-2">
                    <!-- Discount types will be populated here -->
                </div>
            </div>

            <!-- Footer Buttons -->
            <div class="mt-4 sm:mt-5 pt-4 border-t border-white/10 flex justify-end gap-2">
                <button onclick="closeManageDiscountTypesModal()"
                    class="btn-modern px-4 py-2 bg-white/10 text-gray-200 rounded-lg text-xs sm:text-sm font-bold border border-white/20 hover:bg-white/15 hover:border-gray-300/50 hover:text-white transition-all backdrop-blur-sm min-h-[40px]">
                    Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    </div>

    <!-- ØªÙ‚Ù„ÙŠÙ„ Ø¶Ø¬ÙŠØ¬ console ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ (Ø¥Ø¨Ù‚Ø§Ø¡ console.error Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©) -->
    <script>
        (function () {
            if (typeof window === 'undefined') return;
            var h = window.location.hostname || '';
            if (h === 'localhost' || h === '127.0.0.1' || h === '') return;
            var noop = function () { };
            if (typeof console !== 'undefined') {
                if (console.log) console.log = noop;
                if (console.warn) console.warn = noop;
            }
        })();
    </script>
    <!-- Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù€ 55 Ù„Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª/Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®ØµÙ… (Ù‚Ø¨Ù„ Ø£ÙŠ Ø³ÙƒØ±Ø¨Øª ÙŠØ­ØªØ§Ø¬Ù‡Ø§) -->
    <script defer src="src/discount-clauses-55.js"></script>
    <!-- ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª: firebase Ø«Ù… rbac Ø«Ù… table Ø«Ù… app-extensions Ø«Ù… Ù†Ù‚Ø·Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ app.js -->
    <script defer src="src/rewards-firebase.js"></script>
    <script defer src="src/rewards-rbac.js"></script>
    <script defer src="src/rewards-table.js"></script>
    <script defer src="src/app-extensions.js?v=reasons-row-small"></script>
    <script defer src="src/app.js?v=bonus-dedup-5"></script>
</body>

</html>